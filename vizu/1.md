# Mon premier dashboard

Nous allons maintenant manipuler un dashboard pour ajouter des widgets et avoir quelques visualisations.

![Dashboard Menu](image.png){ align=right }

Pour le moment, nous allons commencer par un dashboard vide.

![Folder](image-1.png){ align=left }

!!!info "Via le menu Dashboard"
    Il est aussi possible de passer par le menu dashboard.

    Il est alors possible de cr√©er des r√©pertoires pour organiser vos dashboards.
    
    üîê Ces r√©pertoires sont aussi utilis√©s pour donner des droits d'acc√®s √† des utilisateurs ou des √©quipes.

## S√©lection de la datasource par d√©faut

On peut d√©marrer et choisir de cr√©er une premi√®re "visualization" en cliquant sur **Add visualization**.

La premi√®re √©tape est de choisir une source de donn√©es pour notre dashboard.
‚ÑπÔ∏è Elle peut √™tre modifi√©e plus tard

![S√©lection des donn√©es](image-2.png)

Dans un premier temps, nous allons choisir une data source particuli√®re, une source de donn√©es Mock int√©gr√©e √† Grafana :

![Mock Grafana Data Source](image-3.png)

C'est une source de donn√©es qui g√©n√®re des donn√©es al√©atoires pour les m√©triques, les logs et les traces. Cela permet de tester les fonctionnalit√©s de Grafana sans avoir √† configurer une source de donn√©es r√©elle.

Elle nous permettra de voir comment fonctionne Grafana et de cr√©er des visualisations de base.

## Visualization : la brique de base du dashboard

On arrive directement sur la cr√©ation d'un panel de visualisation. Ils sont tous pr√©sent√©s de la m√™me mani√®re:

![Panel](image-4.png)

* Au centre, la visualisation
* En bas, les configurations des donn√©es
* √Ä droite, les options de rendu.

‚ÑπÔ∏è Si vous n'avez pas de donn√©es affich√©es, il suffit de cliquer sur *Refresh*

### Les diff√©rents types de visualisation

On peut changer les types de repr√©sentation en s√©lectionnant le type de visualisation dans le menu d√©roulant disponible en cliquant sur *Time Series* en haut du bandeau de configuration des options de rendu.
![Visualizations](image-5.png)

La partie Suggestion propose des visualisations en fonction des donn√©es que vous avez.
![Suggestions](image-6.png)

!!!success
    Cliquez sur plusieurs d'entre elles pour voir les modifications s'afficher en temps r√©el dans la visualisation.

### La zone de s√©lection temporelle

Une fois son mod√®le d'affichage s√©lectionn√©, on veut pouvoir choisir la p√©riode temporelle qui nous int√©resse.

Grafana est pr√©vu pour afficher des donn√©es temporelles, c'est-√†-dire qu'il va prendre en compte nativement la date associ√©e √† chacune de vos donn√©es.

Il est alors possible de filtrer pour ne voir les donn√©es que sur une p√©riode donn√©e.

![alt text](image-7.png)

!!! note "Il est aussi possible de changer le range directement en s√©lectionnant la p√©riode souhait√©e sur le graphique avec la souris."

    ![alt text](image-8.png)

Le menu de s√©lection propose diff√©rentes plages de temps pr√©configur√©es et il est aussi possible de d√©finir une plage de temps personnalis√©e.
![alt text](image-13.png)

Par d√©faut, le rafra√Æchissement des donn√©es est automatique, mais vous pouvez d√©finir une fr√©quence de rafra√Æchissement via le menu disponible via *Refresh*.

!!!success
    Faites le test en modifiant pour avoir un rafra√Æchissement toutes les 5secondes et voir le graphique se mettre √† jour automatiquement.

## Inspection du widget

Il y a un menu de configuration sur chaque widget

![Menu](image-9.png)

Notamment la partie **Inspect** qui est bien pratique :

![Inspect](image-10.png)

Via **Inspect**, vous pouvez voir:

* les donn√©es brutes
* la requ√™te effectu√©e pour r√©cup√©rer les donn√©es
* le JSON de configuration du panel de visualisation

Ce panel d'informations est aussi accessible via le bouton *Query Inspector* :

![Query Inspector](image-12.png)

Elle permet de voir les donn√©es utilis√©es pour le widget, ainsi que la requ√™te (variable, on y reviendra plus tard) qui a √©t√© faite pour les obtenir.

## Queries

En dessous de la visualisation, un onglet **Queries** est disponible.

Cela permet de configurer les requ√™tes qui seront utilis√©es pour r√©cup√©rer les donn√©es √† afficher.

!!!success "Changez la query pour avoir le param√©trage suivant"
    ![alt text](image-11.png)

On a alors plusieurs s√©ries de donn√©es qui s'affichent.

!!!info "Formulaire query"

    Dans les versions r√©centes de Grafana, on retrouve un mode *Builder* qui permet de construire la requ√™te √† l'aide d'un formulaire.
    
    On est guid√© dans la construction de la requ√™te. Le formulaire s'adapte √† chaque type de requ√™te (PromQL, SQL ...).
    C'est souvent pratique pour d√©buter et pour d√©boguer une requ√™te.

    Le mode Code permet de voir la requ√™te. C'est souvent plus rapide pour modifier une requ√™te.

## Transformations

A cot√© de l'onglet **Queries**, il y a un onglet **Transformations**.

Les transformations permettent de modifier les donn√©es avant de les afficher.
![alt text](image-15.png)

Il est possible de faire des [transformations](https://grafana.com/docs/grafana/latest/panels-visualizations/query-transform-data/transform-data/){target="_blank"} sur les donn√©es quelle que soit la source de donn√©es.

!!!info
    Ces transformations sont r√©alis√©es par Grafana, elles ne modifient pas les donn√©es dans la source de donn√©es.

C'est particuli√®rement utile pour les donn√©es qui ne sont pas pr√©vues pour √™tre facilement affich√©es. On peut alors extraire certaines informations, les convertir, les filtrer, les regrouper, etc.

!!!success
    Testez d'ajouter une transformation qui fait la somme de toutes les valeurs affich√©es.

## Les options communes √† tous les widgets

![Option](image-17.png)

### Panel Options

* Le titre
* La description
* Les r√©p√©titions (on a un chapitre d√©di√© üòâ)

### Tooltip

Il est possible d'afficher les infos d√©taill√©es en passant la souris sur le graph.

!!!success
    Testez les diff√©rents modes pour voir la diff√©rence.

### Legend

Les l√©gendes sont pratiques pour afficher rapidement les extr√™mes / moyennes de vos donn√©es.

!!!success
    Configurer la l√©gende pour obtenir le r√©sultat suivant :
    ![alt text](image-14.png)

### Axis

Permet de r√©gler les axes du graphique, les unit√©s, les √©chelles, etc.

!!!success
    Passez votre graph en mode logarithmique par exemple.

### Graph Style

Ici, on retrouve les configurations sp√©cifiques √† chaque type de visualisation.

### Standard Options

Permettent de configurer les unit√©s de grandeur.

On peut aussi choisir les couleurs d'affichage en fonction de la valeur des donn√©es (100¬∞C en rouge par exemple et 0¬∞C en bleu).

### Les Data Links

Ils permettent de faire des liens vers d'autres dashboards / visualizations / URL externes et peuvent utiliser des placeholders pour passer les valeurs courantes.

### Les Thresholds

Sans trop de surprise, ils permettent de d√©finir des seuils et de leur associer une couleur particuli√®re. Ils peuvent √™tre d√©finis de mani√®re absolue ou relative (en %) et s'adapter aux valeurs affich√©es.

### (Advanced) Fields Override

Ils permettent de changer tout ou partie de la configuration du widget en fonction de la valeur des donn√©es.

## Sauvegarde du dashboard

On va enfin pouvoir sauvegarder notre dashboard.
![alt text](image-16.png)

√áa y est, nous avons notre premier dashboard avec un seul widget. Nous allons maintenant pouvoir en ajouter d'autres.

**üõ´ Prochaine √©tape : Configurer une sources de donn√©es SQL [‚û°Ô∏è](../dashboard-business/README.md)**
