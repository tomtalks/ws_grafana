{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\ud83e\udeb5 Un dashboard Grafana qui claque \ud83c\udf1f","text":"<p>Bienvenue dans ce workshop sur Grafana ! L'objectif est de vous faire d\u00e9couvrir et manipuler Grafana en exploitant diff\u00e9rents types de donn\u00e9es.</p> <p>Pour cela, nous allons instancier Grafana et au fur et \u00e0 mesure, nous ajouterons des sources de donn\u00e9es et des dashboards, en explorant les diff\u00e9rentes fonctionnalit\u00e9s.</p> <p>Vous avez \u00e0 votre disposition une application contenant un front, plusieurs backends et une base de donn\u00e9es Postgres.</p> <pre><code>flowchart TD\n    A(WoodStoreDashboard)\n    B{LumberCamp}\n    X{FurnitureStore1}\n    Y{FurnitureStore2}\n    Z{FurnitureStore3}\n    D[(Postgres)]\n    E{Otel Collector}\n    I(Grafana)\n    F(Prometheus)\n    G(Loki)\n    H(Tempo)\n\n    B ---&gt; D\n    A ---&gt; B\n    X &amp; Y &amp; Z ---&gt; B\n    D -.-&gt; E\n    B -.-&gt; E\n    X &amp; Y &amp; Z -.-&gt; E\n    E -.-&gt; F &amp; G &amp; H\n    I -- Metrics --&gt; F\n    I -- Logs --&gt; G\n    I -- Traces --&gt; H</code></pre>"},{"location":"#composants-de-lapplication","title":"Composants de l'application","text":"<ul> <li>Wood Store Dashboard : Le front de l'application qui affiche les stocks</li> <li>Furniture Store : Plusieurs backends permettant de modifier les stocks de mani\u00e8re autonome</li> <li>Lumber Camp : Une API pour modifier les stocks et les commandes dans l'application</li> <li>Postgres : La base de donn\u00e9es</li> </ul>"},{"location":"#composants-de-la-stack-dobservabilite","title":"Composants de la stack d'observabilit\u00e9","text":"<ul> <li>Otel Collector : L'API permettant d'envoyer nos m\u00e9triques, logs et traces</li> <li>Prometheus : La base de donn\u00e9es pour les m\u00e9triques</li> <li>Loki : La base de donn\u00e9es pour les logs</li> <li>Tempo : La base de donn\u00e9es pour les traces</li> <li>Grafana : L'outil de visualisation pour voir les m\u00e9triques, logs et traces</li> </ul>"},{"location":"#cest-parti","title":"C'est parti \ud83c\udf5d","text":"<p>\ud83d\udeeb Let's go ! Premi\u00e8re \u00e9tape : Setup de l'environnement \u27a1\ufe0f</p>"},{"location":"labs/","title":"\ud83e\uddea Labs","text":"<p>Pour acc\u00e9der aux donn\u00e9es, il faut les importer dans Grafana. Pour cela, il faut ajouter une source de donn\u00e9es.</p> <p>Rendez-vous dans le menu de configuration \u00e0 gauche, puis cliquez sur Connections.</p>"},{"location":"labs/#les-differents-types-de-data-sources","title":"Les diff\u00e9rents types de data sources","text":"<p>Il existe de multiples plugins pour se connecter \u00e0 diff\u00e9rentes data sources.</p> <p>On retrouve bien \u00e9videmment les datasources sur des bases de donn\u00e9es de type time series (Prometheus, Tempo, InfluxDB). Mais aussi des bases relationnelles ou NoSQL, des bases de traces (Jaeger, Tempo) ou de log (Loki, Elasticsearch).</p> <p>Chaque source de donn\u00e9es a sa propre configuration et son propre langage de requ\u00eatage.</p> <p>Au programme donc plusieurs cas (On vous conseille de les faire dans l'ordre, mais c'est vous qui voyez) : </p> <ul> <li>\ud83d\udc23 Mon premier dashboard : Pour d\u00e9couvrir les fonctionnalit\u00e9s de base</li> <li>\ud83d\udcbe PostGreSQL : Pour afficher des donn\u00e9es d'une base de donn\u00e9es</li> <li>\ud83c\udfa0 Prometheus : Pour afficher des donn\u00e9es issues d'une source de donn\u00e9es dynamique</li> <li>\ud83c\udfa2 Dashboard avanc\u00e9 : Pour aller plus loin dans la configuration</li> <li>\ud83c\udf81 Partager : Pour comprendre comment partager (importer &amp; exporter des dasboards)</li> <li>\ud83d\udd75\ufe0f OpenTelemetry : Pour aller plus loin que Prometheus seul</li> <li>\ud83e\udde9 Dashboard avec plugin : Pour utiliser l'\u00e9cosyst\u00e8me Grafana et les plugins</li> </ul>"},{"location":"mkdocs-cheatsheet/","title":"Cheatsheet for mkdocs &amp; mkdocs-material","text":""},{"location":"mkdocs-cheatsheet/#material-theme","title":"Material theme","text":"<p>In <code>mkdocs.yml</code></p> <pre><code>theme:\n  name: material\n</code></pre>"},{"location":"mkdocs-cheatsheet/#features","title":"Features","text":"<p>In <code>mkdocs.yml</code>, enable admonitions, annotations, code highlightnings</p> <pre><code>markdown_extensions:\n  - pymdownx.highlight:\n      anchor_linenums: true\n      line_spans: __span\n      pygments_lang_class: true\n  - attr_list\n  - md_in_html      \n  - pymdownx.inlinehilite\n  - pymdownx.snippets\n  - pymdownx.superfences\n  - admonition\n  - pymdownx.details\n</code></pre> <p>also for ease code snippet usage, add features in <code>theme</code> part</p> <pre><code>  features:\n    - content.code.copy\n    - content.code.annotate\n</code></pre>"},{"location":"mkdocs-cheatsheet/#usage","title":"Usage","text":""},{"location":"mkdocs-cheatsheet/#annotations","title":"Annotations","text":"<pre><code>Lorem ipsum dolor sit amet, (1) consectetur adipiscing elit.\n{ .annotate }\n\n1.  \ud83d\ude1d I'm an annotation! (1)\n    { .annotate }\n\n    1.  \ud83e\udd2f I'm an annotation in an annotation\n</code></pre>"},{"location":"mkdocs-cheatsheet/#admonitions","title":"Admonitions","text":"<p>Available keywords are : <code>note</code>, <code>abstract</code>, <code>info</code>, <code>tip</code>, <code>success</code>, <code>question</code>, <code>warning</code>, <code>failure</code>, <code>danger</code>, <code>bug</code>, <code>example</code>, <code>quote</code>. Admonition are displayed by default, but can be replace by collapsible block switching from <code>!!!</code> to <code>???</code></p> <pre><code>!!! warning\n    Beware of the wolf \ud83d\udc3a\n</code></pre> <p>It supports <code>annotation</code>:</p> <pre><code>??? bug annotate\n    this a \ud83d\udc1e (1)\n\n1.  only in a specific version\n</code></pre>"},{"location":"mkdocs-cheatsheet/#code-blocks","title":"Code blocks","text":"<p>Code blocks are of course supported, but you can also add either a title or annotation.</p> <p>\u2139\ufe0f The comment is mandatory for the annotation to be processed. Here <code>#</code> in a yaml file.</p> <pre><code>\\`\\`\\`yaml\n  annotations: # (1)\n    downscaler/uptime: Mon 07:30-18:00 CET\n    downscaler/force-downtime: \"true\"\n\\`\\`\\`\n\n1. \ud83e\udd76 Incredible annotation   \n</code></pre>"},{"location":"mkdocs-cheatsheet/#snippets","title":"Snippets","text":"<p>We can include files as snippets, with an optional title:</p> <pre><code>\\```yaml title=\"a simple deployment sample\"\n\\```\n</code></pre>"},{"location":"mkdocs-cheatsheet/#build","title":"Build","text":"<p>Pour installer mkdocs et les extensions:</p>"},{"location":"mkdocs-cheatsheet/#avec-un-virtualenv","title":"Avec un virtualenv","text":"<pre><code>python3 -m venv ./.venv\nsource .venv/bin/activate\n</code></pre> <pre><code>pip install -r requirements.txt\n</code></pre> <p>Pour lancer le serveur de dev:</p> <pre><code>mkdocs serve --clean\n</code></pre> <p>Pour lancer un build et g\u00e9n\u00e9rer le pdf <pre><code>mkdocs build\n</code></pre></p>"},{"location":"nav/","title":"Nav","text":"<ul> <li>\ud83c\udfe0 Home</li> <li>\ud83d\ude9a Init<ul> <li>\ud83d\udee0\ufe0f Le setup</li> <li>\ud83d\ude82 D\u00e9couverte</li> <li>\ud83c\udfe2 Organization</li> </ul> </li> <li>\ud83e\uddea Labs<ul> <li>\ud83d\udc23 Mon premier dashboard</li> <li>\ud83d\udc18 PostGreSQL</li> <li>\ud83c\udfa0 Prometheus</li> <li>\ud83c\udfa2 Dashboard avanc\u00e9</li> <li>\ud83c\udf81 Partager</li> <li>\ud83d\udd75\ufe0f OpenTelemetry</li> <li>\ud83e\udde9 Dashboard avec plugin</li> </ul> </li> <li>\ud83d\udedf Astuces</li> <li>\ud83d\udd7aA vos Feedback</li> </ul>"},{"location":"tips/","title":"\ud83d\udedf Astuces","text":"<p>Sur cette page quelques astuces pour vous aider \u00e0 d\u00e9bugger, vous d\u00e9bloquer...</p>"},{"location":"tips/#le-triangle-rouge","title":"\ud83d\udd3a Le triangle rouge","text":"<p>Si votre widget ne s'affiche pas, souvent il y a un triangle rouge qui apparait et vous donne l'erreur</p> <p></p>"},{"location":"tips/#mode-table-view","title":"\ud83d\uddbc\ufe0f Mode <code>Table view</code>","text":"<p>Si vous ne comprenez pas les donn\u00e9es affich\u00e9es par la visualisation ou si il n'y a rien qui s'affiche, un moyen simple est de passer en <code>Table view</code> pour voir les donn\u00e9es qui servent \u00e0 afficher le graphique.</p> <p></p>"},{"location":"tips/#afficher-la-requete-executee","title":"\ud83e\udd14 Afficher la requ\u00eate execut\u00e9e","text":"<p>Si on a un doute sur les donn\u00e9es remont\u00e9es, via les \"3 points\" en haut \u00e0 droite du widget puis <code>Inspect &gt; Query</code> on peut voir la requ\u00eate execut\u00e9e (tr\u00e8s pratique en particulier quand on fait du SQL)</p> <p></p>"},{"location":"tips/#masquer-certaines-etapes-query-ou-transformation","title":"\ud83d\ude48 Masquer certaines \u00e9tapes (query ou transformation)","text":"<p>Dans certains cas, on va enchainer/combiner plusieurs Query et/ou Transformation. Pour faciliter le debug, on a la possibilit\u00e9 de d\u00e9sactiver une ou plusieurs d'entre elles via le bouton \"oeil\". Cela permet de voir o\u00f9 le probl\u00e8me se situe</p> <p></p>"},{"location":"tmp/","title":"\ud83e\udeb5 Un dashboard Grafana qui claque \ud83c\udf1f","text":"<p>Bienvenue dans ce workshop sur Grafana ! L'objectif est de vous faire d\u00e9couvrir et manipuler Grafana en exploitant les donn\u00e9es d'une application de gestion de commandes de bois. Vous aurez \u00e0 votre disposition une base de donn\u00e9es PostgreSQL, un backend Java avec OpenTelemetry, ainsi que trois applications frontend simulant des magasins de fournitures.</p>"},{"location":"tmp/#vous-avez-a-votre-disposition-une-application-contenant-un-front-plusieurs-back-et-une-base-de-donnees-postgres","title":"Vous avez \u00e0 votre disposition une application contenant un front, plusieurs back et une base de donn\u00e9es Postgres.","text":"<pre><code>flowchart TD\n    A(WoodStoreDashboard)\n    B{LumberCamp}\n    X{FurnitureStore1}\n    Y{FurnitureStore2}\n    Z{FurnitureStore3}\n    D[(Postgres)]\n    E{Otel Collector}\n    I(Grafana)\n    F(Prometheus)\n    G(Loki)\n    H(Tempo)\n\n    B ---&gt; D\n    A ---&gt; B\n    X &amp; Y &amp; Z ---&gt; B\n    D -.-&gt; E\n    B -.-&gt; E\n    X &amp; Y &amp; Z -.-&gt; E\n    E -.-&gt; F &amp; G &amp; H\n    I -- Metrics --&gt; F\n    I -- Logs --&gt; G\n    I -- Traces --&gt; H</code></pre>"},{"location":"tmp/#composants-de-lapplication","title":"Composants de l'application","text":"<ul> <li>Wood Store Dashboard : Le front de l'application qui affiche les stocks</li> <li>Furniture Store : Plusieurs back permettant de modifier les stocks de mani\u00e8re autonome</li> <li>Lumber Camp : Une API pour modifier les stocks et les commandes dans l'application</li> <li>Postgres : La base de donn\u00e9es</li> </ul>"},{"location":"tmp/#composants-de-la-stack-dobservabilite","title":"Composants de la stack d'observabilit\u00e9","text":"<ul> <li>Otel Collector : L'API permettant d'envoyer nos m\u00e9triques, logs et traces</li> <li>Prometheus : La base de donn\u00e9es pour les m\u00e9triques</li> <li>Loki : La base de donn\u00e9es pour les logs</li> <li>Tempo : La base de donn\u00e9es pour les traces</li> <li>Grafana : L'outil de visualisation pour voir les m\u00e9triques, logs et traces</li> </ul>"},{"location":"tmp/#introduction-a-grafana-et-ses-menus-principaux","title":"Introduction \u00e0 Grafana et ses menus principaux","text":"<p>Grafana est une plateforme puissante de visualisation et de surveillance qui permet d'exploiter efficacement vos donn\u00e9es gr\u00e2ce \u00e0 des tableaux de bord interactifs. Voici les principaux menus que vous utiliserez dans Grafana :</p>"},{"location":"tmp/#1-home","title":"1. Home","text":"<p>La page d'accueil qui vous permet d'acc\u00e9der rapidement \u00e0 vos tableaux de bord favoris et d'explorer les options de configuration g\u00e9n\u00e9rales.</p>"},{"location":"tmp/#2-dashboards","title":"2. Dashboards","text":"<p>Cette section permet de g\u00e9rer vos tableaux de bord : - Create : Cr\u00e9ez de nouveaux tableaux de bord pour visualiser vos donn\u00e9es. - Browse : Explorez et ouvrez les tableaux de bord existants.</p>"},{"location":"tmp/#3-explore","title":"3. Explore","text":"<p>Un outil interactif pour analyser rapidement vos donn\u00e9es : - Permet de filtrer et d'explorer les logs, les m\u00e9triques, et les traces en temps r\u00e9el. - Id\u00e9al pour le d\u00e9pannage rapide.</p>"},{"location":"tmp/#4-alerting","title":"4. Alerting","text":"<p>Configurez des alertes pour surveiller vos donn\u00e9es et \u00eatre notifi\u00e9 en cas d'anomalies : - D\u00e9finissez des seuils d'alerte sur vos m\u00e9triques. - G\u00e9rez les canaux de notification comme les emails, Slack, ou autres.</p>"},{"location":"tmp/#5-configuration","title":"5. Configuration","text":"<p>Permet de configurer les diff\u00e9rents aspects de Grafana : - Data Sources : Ajoutez et g\u00e9rez vos sources de donn\u00e9es (Prometheus, Loki, etc.). - Users : G\u00e9rez les utilisateurs et les permissions. - Plugins : Installez des plugins pour \u00e9tendre les fonctionnalit\u00e9s de Grafana.</p>"},{"location":"tmp/#6-plugins","title":"6. Plugins","text":"<p>Acc\u00e9dez aux extensions qui enrichissent Grafana : - Ajoutez des visualisations personnalis\u00e9es. - Connectez des int\u00e9grations suppl\u00e9mentaires.</p>"},{"location":"tmp/#7-help","title":"7. Help","text":"<p>Un espace pour acc\u00e9der \u00e0 la documentation et aux ressources d'aide : - Community Support : Rejoignez la communaut\u00e9 Grafana. - Documentation : Lisez les guides officiels pour approfondir vos connaissances.</p>"},{"location":"tmp/#5-verifier-que-tout-fonctionne","title":"5. V\u00e9rifier que tout fonctionne","text":"<p>Pour v\u00e9rifier que vos services sont bien lanc\u00e9s, utilisez la commande suivante :</p> <pre><code>docker-compose ps\n</code></pre> <p>Vous devriez voir tous les services avec l'\u00e9tat <code>Up</code>.</p>"},{"location":"tmp/#6-acceder-a-grafana","title":"6. Acc\u00e9der \u00e0 Grafana","text":"<p>Une fois le stack lanc\u00e9, ouvrez votre navigateur et rendez-vous \u00e0 l'adresse suivante :</p> <pre><code>http://localhost:3000\n</code></pre> <p>Les identifiants par d\u00e9faut sont :</p> <ul> <li>Utilisateur : <code>admin</code></li> <li>Mot de passe : <code>admin</code></li> </ul> <p>\ud83d\ude80 Bravo ! Vous \u00eates pr\u00eats \u00e0 explorer Grafana et \u00e0 cr\u00e9er vos premiers tableaux de bord !</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Configurer vos sources de donn\u00e9es \u27a1\ufe0f</p>"},{"location":"dashboard-business/","title":"Dashboard Business","text":"<p>On va maintenant changer de Datasource pour aller taper directement dans une base de donn\u00e9es.</p>"},{"location":"dashboard-business/#data-source","title":"Data Source","text":"<p>On va cr\u00e9er une nouvelle datasource via le menu <code>Connections &gt; Data sources</code> et choisir <code>PostgreSQL</code> comme type de datasource.</p> <p></p> <p>Les informations de connexion sont les suivantes :</p> Information Value URL postgres:5432 Database jack User john Password viewer TLS/SSL Mode disable <p>Attention \u00e0 tes doigts</p> <p>Grafana ne fait aucun contr\u00f4le sur les requ\u00eates qui sont envoy\u00e9es sur la BDD. Un <code>DROP SCHEMA default CASCADE;</code> est assez efficace pour devoir r\u00e9initialiser la BDD...</p> <p>Une bonne pratique est donc d'avoir un compte en read-only pour Grafana pour acc\u00e9der \u00e0 la BDD.</p> <p>Success</p> <p></p> <p>On peut maintenant commencer \u00e0 construire notre dashboard (par exemple en cliquant sur building a dashboard).</p>"},{"location":"dashboard-business/#lumbercamp-front-end","title":"Lumbercamp front end","text":"<p>Nous avons actuellement une application qui permet de visualiser les donn\u00e9es de notre application. C'est woodstoredashboard.</p> <p></p> <p>Cette application stocke les donn\u00e9es dans une base de donn\u00e9es PostgreSQL. Les deux objets principaux sont les commandes dans la table wood_order et les stocks stock.</p> <p>On va cette fois-ci faire un dashboard en utilisant cette source de donn\u00e9es PostgreSQL. On va afficher les commandes.</p>"},{"location":"dashboard-business/#donnees-statiques","title":"Donn\u00e9es statiques","text":"<p>Il est possible d'afficher des informations qui ne sont pas temporelles dans un dashboard, en utilisant par exemple le mode de visualisation Table.</p> <p></p> <p>\u2139\ufe0f Il n'est alors pas possible de s\u00e9lectionner une plage de temps. Ou plut\u00f4t \u00e7a ne sert \u00e0 rien vu que l'information n'existe pas dans les donn\u00e9es.</p> <p>Success</p> <p>Ajouter 2 visualisations dans le dashboard pour afficher le contenu des 2 tables de la BDD</p> <p></p>"},{"location":"dashboard-business/#stock-status","title":"Stock Status","text":"<p>On souhaite afficher la liste des essences de bois dans le stock.</p> <p>Pour cela on va :</p> <ul> <li>cr\u00e9er un widget de type Pie Chart. </li> <li>configurer la requ\u00eate SQL pour faire la somme des quantit\u00e9s de bois par essence depuis la table Stock</li> <li>modifier les options pour avoir les pourcentages et les diff\u00e9rents types affich\u00e9s</li> </ul> Si la visualisation est en erreur <p>Il y a plus de d\u00e9tails sur l'ic\u00f4ne warning:</p> <p></p> Spoiler la solution est l\u00e0 <ul> <li><code>sql SELECT SUM(quantity) as quantity, type as type FROM stock GROUP BY type LIMIT 50</code></li> <li>On s\u00e9lectionnera<ul> <li>les values pour ne pas \u00eatre en <code>Calculate</code> mais en <code>All values</code></li> <li>la l\u00e9gende pour \u00eatre sous la forme d'une table.</li> <li>Les labels Percent et/ou Value </li> </ul> </li> </ul> <p></p>"},{"location":"dashboard-business/#order-total","title":"Order Total","text":"<p>On va faire la m\u00eame chose pour les commandes. On va afficher le total des commandes par essence de bois, cette fois-ci avec le pourcentage affich\u00e9 dans la l\u00e9gende et la valeur affich\u00e9e sur le graphique.</p> <p>Le formulaire c'est bien mais les vrais pros utilisent le mode Code </p> <p>En plus, il y a une fonction d'auto-compl\u00e9tion bien pratique pour les requ\u00eates SQL.</p> Spoiler la solution est l\u00e0 <ul> <li><code>sql SELECT sum(quantity), type FROM wood_order w GROUP BY type</code></li> <li>On s\u00e9lectionnera<ul> <li>les values pour ne pas \u00eatre en <code>Calculate</code> mais en <code>All values</code></li> <li>la l\u00e9gende pour \u00eatre sous la forme d'une table.</li> <li>Les labels Percent et/ou Value </li> </ul> </li> </ul> <p></p>"},{"location":"dashboard-business/#et-si-on-utilisait-la-colonne-timestamp","title":"Et si on utilisait la colonne Timestamp","text":"<p>Vous avez peut-\u00eatre remarqu\u00e9 que la table wood_order contient une colonne timestamp. </p> <p>On va cr\u00e9er un nouveau widget pour avoir une vision de nos commandes \u00e0 travers le temps.</p> <p>Lors de l'utilisation de l'auto-compl\u00e9tion, vous devez voir la proposition de fonctions : </p> <p>Plusieurs macro sont mises \u00e0 disposition pour faciliter l'utilisation des dates.</p> <p>M\u00eame si nos donn\u00e9es ne sont pas au format time series mais que nous avons une information sur le temps, il est possible de faire des graphiques temporels.</p> <p>Il faut un peu aider Grafana en lui indiquant que la colonne est un timestamp.</p> <p>Et rajouter une clause where pour prendre en compte la plage de temps ou utiliser un filtre.</p> <p>Success</p> <ul> <li>Cr\u00e9er un widget de type Histogramme qui montre le nombre de commandes par type d'essence d'arbre</li> <li>Configurer des thresholds \u00e0 25%, 50% et 75%</li> </ul> <p></p> Spoiler la solution est l\u00e0 <ul> <li><code>sql SELECT count(id), type FROM wood_order WHERE $__timeFilter(timestamp) GROUP BY type</code></li> <li><code>Standard options &gt; Color scheme</code> : `From thresholds (by value)``</li> <li>Ajouter 3 thresholds</li> </ul> <p>On peut maintenant afficher des donn\u00e9es sous la forme d'un histogramme et voir l'\u00e9volution des commandes / stock dans le temps en changeant la plage de temps d'affichage.</p>"},{"location":"dashboard-business/#encore-plus-fort-les-transformations","title":"Encore plus fort : les Transformations","text":"<p>Afin de manipuler les transformations, nous voulons maintenant afficher les quantit\u00e9s qui n'ont pas pu \u00eatre honor\u00e9es dans les commandes par type d'essence.</p> <p>Mais nous n'avons pas directement cette information dans la table wood_order. On a un champ quantit\u00e9 command\u00e9e (quantity) et un champ quantit\u00e9 livr\u00e9e (honored).</p> <p>On pourrait se passer des transformations avec une bonne grosse requ\u00eate SQL et des jointures mais ce n'est pas p\u00e9dagogique ! \ud83d\ude09</p> <p>L'objectif est donc de:</p> <ul> <li>Afficher pour chaque type d'essence une Gauge montrant le pourcentage de quantit\u00e9 non-livr\u00e9e</li> <li>Utiliser max. 2 requ\u00eates SQL</li> <li>Utiliser uniquement des transformations pour construire la donn\u00e9e</li> </ul> Besoin d'un coup de pouce ? <p>On va faire ici 2 requ\u00eates, l'une pour r\u00e9cup\u00e9rer la quantit\u00e9 effectivement livr\u00e9e \"honored\", l'autre pour r\u00e9cup\u00e9rer la quantit\u00e9 command\u00e9e \"quantity\".</p> <p> <pre><code>SELECT type, SUM(quantity) AS \"ask\" FROM wood_order WHERE $__timeFilter(\"timestamp\") GROUP BY type LIMIT 50\n</code></pre> <pre><code>SELECT type, SUM(honored) AS \"sent\" FROM wood_order WHERE $__timeFilter(\"timestamp\")  GROUP BY type LIMIT 50 \n</code></pre></p> Un autre ?! <p>La premi\u00e8re transformation consiste \u00e0 \"ignorer\" les 2 frames pour ne faire qu'un jeu de donn\u00e9es </p> <p>Success</p> <p></p> Spoiler la solution est l\u00e0 <ol> <li>Il faut faire 2 requ\u00eates SQL pour r\u00e9cup\u00e9rer les quantit\u00e9s command\u00e9es et livr\u00e9es par commande     <pre><code>SELECT type, SUM(quantity) AS \"ask\" FROM wood_order WHERE $__timeFilter(\"timestamp\") GROUP BY type LIMIT 50\n</code></pre> <pre><code>SELECT type, SUM(honored) AS \"sent\" FROM wood_order WHERE $__timeFilter(\"timestamp\")  GROUP BY type LIMIT 50 \n</code></pre></li> <li>Ajouter une premi\u00e8re transformation pour utiliser les donn\u00e9es des 2 requ\u00eates comme une seule donn\u00e9e </li> <li>Ajouter une transformation pour calculer le delta entre ce qui a \u00e9t\u00e9 command\u00e9 et ce qui a \u00e9t\u00e9 livr\u00e9 </li> <li>Ajouter une transformation pour filtrer les r\u00e9sultats strictement positifs </li> <li>Ajouter une transformation pour calculer le pourcentage de ce qui est manquant par rapport au total </li> <li>Ajouter une transformation pour filtrer les donn\u00e9es qui nous int\u00e9ressent : le type et le pourcentage calcul\u00e9 </li> <li>Configurer le widget en type Gauge en affichant toutes les valeurs (All values) des champs num\u00e9riques (Numeric Fields), avec une unit\u00e9 en *Percent (0.0-1.0) et des thresholds \u00e0 <code>0.2</code>, <code>0.5</code>, <code>0.8</code> </li> </ol>"},{"location":"dashboard-business/#et-pour-cloturer-les-variables","title":"Et pour cloturer : les Variables","text":"<p>Il serait int\u00e9ressant de pouvoir filtrer tous les widgets d'un dashboard en fonction du type d'essence d'arbre par exemple pour avoir les infos filtr\u00e9es uniquement sur l'essence souhait\u00e9e.</p> <p>Dans cette derni\u00e8re \u00e9tape du lab, on va donc ajouter une Variable au niveau du Dashboard pour pouvoir filtrer en fonction de l'essence que l'on souhaite</p>"},{"location":"dashboard-business/#configurer-la-variable","title":"Configurer la variable","text":"<p>Dans les Settings du dashboard, configurer une variable <code>type_of_wood</code> qui r\u00e9cup\u00e8re la liste des essences.</p> <p>Success</p> <p>Une fois configur\u00e9, un champ de filtrage apr\u00e8s sur le dashboard listant les diff\u00e9rentes essences trouv\u00e9es ET l'option <code>All</code></p> <p></p> Spoiler la solution est l\u00e0 <p>Il faut configurer la variable pour utiliser la datasource Postgre et la requ\u00eate suivante pour r\u00e9cup\u00e9rer la liste des essences. <pre><code>select type from wood_order\n</code></pre> Et ne pas oublier de cocher les 2 options :</p> <ul> <li><code>Multi-value</code></li> <li><code>Include All option</code></li> </ul>"},{"location":"dashboard-business/#modifer-les-widgets","title":"Modifer les widgets","text":"<p>Maintenant que notre variable est disponible, il faut modifier les widgets pour qu'ils la prennent en compte.</p> <p>Modifier donc les 4 widgets pour que l'on puisse filtrer sur le type d'essence au niveau du dashboard et que dans leur titre les essences choisies soient afficher</p> <p>Success</p> <p></p> Spoiler la solution est l\u00e0 <p>Il suffit de:</p> <ul> <li> <p>Modifier les requ\u00eates SQL des widget pour inclure une clause <code>WHERE</code>: <pre><code>SELECT SUM(quantity) AS \"quantity\", type AS \"type\" FROM stock s WHERE s.type IN ( $type_of_wood ) GROUP BY type LIMIT 50\n</code></pre></p> </li> <li> <p>Modifier le <code>Title</code> du panel pour inclure la variable `type_of_wood`` </p> </li> </ul>"},{"location":"dashboard-metrics/","title":"Metrics Dashboard","text":""},{"location":"dashboard-metrics/#configuration","title":"Configuration","text":""},{"location":"dashboard-metrics/#prometheus","title":"Prometheus","text":"<p>Nous allons ajouter une DataSource <code>Prometheus</code> pour afficher les m\u00e9triques issues d'applications Java.</p> <p></p> Information Value Name prometheus URL http://prometheus:9090 Authentication methods No Authentication Skip TLS certificate validation true <p>\ud83d\ude07 Comme tout est en local, nous n'avons pas d'authentification \u00e0 ajouter. Ni de gestion des TLS.</p> <p>Vous pouvez d'ailleurs vous connecter \u00e0 cette instance qui tourne en local ici</p> <p>Success</p> <p></p>"},{"location":"dashboard-metrics/#la-fonction-explore","title":"La fonction explore","text":"<p>Avant de cr\u00e9er notre dashboard, on peut facilement explorer les donn\u00e9es disponibles via cette DataSource en cliquant sur le bouton <code>Explore data</code> en haut \u00e0 droite qui redirige vers le menu <code>Explore</code>. On retrouve le m\u00eame type de formulaire que pour les requ\u00eates d'un widget.</p> <p>On peut facilement voir les m\u00e9triques disponibles via le <code>metrics browser</code></p> <p></p> <p>Mais aussi gr\u00e2ce \u00e0 l'auto-compl\u00e9tion:</p> <p></p> <p>Une visualisation par d\u00e9faut est propos\u00e9e pour afficher les donn\u00e9es:</p> <p></p> <p>Et les donn\u00e9es brutes:</p> <p></p>"},{"location":"dashboard-metrics/#quelques-mots-sur-promql","title":"Quelques mots sur PromQL","text":"<p>Prometheus utilise le langage PromQL pour <code>Prometheus Query Language</code> ...</p> <p>Une requ\u00eate PromQL retourne une liste d'enregistrements, ils sont compos\u00e9s des \u00e9l\u00e9ments suivants :</p> <ul> <li>Name: le nom de la m\u00e9trique</li> <li>Labels: les labels associ\u00e9s \u00e0 la m\u00e9trique</li> <li>Sample: la valeur de la m\u00e9trique</li> <li>Timestamp: le timestamp</li> </ul> <p> Ce schema est extrait de l'article introduction to prometheus promql</p> <p>La cl\u00e9 d'un enregistrement est la combinaison du nom de la m\u00e9trique, des labels associ\u00e9s et du temps.</p> <pre><code>http_requests_total{app=\"myApp\",instance=\"blue\"}@1600000000 -&gt; 5\nhttp_requests_total{app=\"myApp\",instance=\"green\"}@1600000000 -&gt; 10\n</code></pre> <p>Dans l'exemple ci-dessus, on a deux enregistrements pour la m\u00eame m\u00e9trique <code>http_requests_total</code> mais avec des labels diff\u00e9rents.</p> <p>On peut donc avoir plusieurs valeurs pour la m\u00eame m\u00e9trique :</p> <ul> <li>Le Quoi : Ici http_requests_total qui exprime une unit\u00e9 : on observer un nombre de requete total.</li> <li>Le Qui : Toutes les deux concernent l'aplication <code>myApp</code> mais sur deux instances diff\u00e9rentes (une <code>blue</code> et une <code>green</code>).</li> <li>Le Quand : La valeur est associ\u00e9e \u00e0 un timestamp, ici <code>1600000000</code> (en secondes depuis le 1er janvier 1970).</li> <li>La Valeur : La valeur de la m\u00e9trique, ici <code>5</code> et <code>10</code>.</li> </ul> <p>Les labels et le nom de la m\u00e9trique sont en partie d\u00e9finis par la source de donn\u00e9es. Il est aussi possible d'ajouter des r\u00e8gles dans Prometheus pour ajouter / modifier / supprimer des labels.</p> <p>Par d\u00e9faut, Prometheus va ajouter des labels pour donner des informations sur la source des donn\u00e9es (le label job par exemple).</p> <p>C'est tr\u00e8s utile pour s\u00e9parer les donn\u00e9es de plusieurs sources (ex environnement de production / pr\u00e9prod ou dans l'exemple pr\u00e9c\u00e9dent blue et green).</p>"},{"location":"dashboard-metrics/#le-dashboard","title":"Le dashboard","text":"<p>D\u00e9marrons maintenant le lab : cr\u00e9er un nouveau Dashboard nomm\u00e9 Dashboard de monitoring.</p>"},{"location":"dashboard-metrics/#monitoring-de-la-memoire","title":"Monitoring de la m\u00e9moire","text":"<p>Ajouter une nouvelle visualisation pour afficher les m\u00e9triques de m\u00e9moire de notre application Java en choisissant la DataSource <code>prometheus</code> pr\u00e9c\u00e9demment cr\u00e9\u00e9e.</p> <p>On va utiliser la m\u00e9trique suivante : jvm_memory_used_bytes pour configurer la Query.</p> <p>En sp\u00e9cifiant uniquement le nom de la m\u00e9trique, on remonte l'ensemble des valeurs associ\u00e9es \u00e0 cette m\u00e9trique.</p> <p>Les m\u00e9triques sont bien affich\u00e9es</p> <p></p> <p>Prometheus utilise des Labels pour donner plus d'informations sur une m\u00e9trique</p> <p></p>"},{"location":"dashboard-metrics/#configuration-du-widget","title":"Configuration du widget","text":"<p>Pour le moment, notre widget n'est pas particuli\u00e8rement lisible (Toutes les informations m\u00e9moire de nos JVM sont retourn\u00e9es sur le m\u00eame graphe). On va ajouter des informations pour le rendre plus lisible.</p> <p>On souhaite afficher les m\u00e9moires Heap / Non Heap pour le service lumbercamp pour suivre l'\u00e9volution de la m\u00e9moire.</p> <p>En observant les labels pour identifier ceux qui sont les plus int\u00e9ressants et modifier le widget en cons\u00e9quence:</p> <ul> <li>Filtrer pour n'afficher que les infos en lien avec le service lumbercamp.</li> <li>Modifier les unit\u00e9s du graphe pour que les valeurs soient en <code>bytes</code></li> <li>Afficher uniquement 2 courbes repr\u00e9sentant la m\u00e9moire de type heap et la m\u00e9moire de type non_heap</li> </ul> <p>Le langage de requ\u00eatage PromQL permet de faire des op\u00e9rations sur les donn\u00e9es. On utilisera ici l'op\u00e9rateur d'agr\u00e9gation sum</p> Un indice <p>Le label <code>jvm_memory_type</code> permet de faire la diff\u00e9rence entre la heap et la non_heap. Il y a plusieurs metrics pour chaque sous cat\u00e9gories de m\u00e9moire. Par exemple, pour la heap, on a un label (<code>jvm_memory_pool_name</code> )qui permet de faire la diff\u00e9rence entre ces sous cat\u00e9gories.</p> Indice 2 <p>Attention <code>jvm_memory_pool_name=\"Metaspace\"</code> est d\u00e9j\u00e0 la somme des pools : \"CodeHeap 'non-nmethods'\" \"CodeHeap 'non-profiled nmethods'\" \"CodeHeap 'profiled nmethods'\" \"Compressed Class Space\"...</p> <p>Success</p> <p></p> Spoiler la solution est l\u00e0 <p>Il faut faire 2 Query :</p> <ul> <li> <p>Une pour la partie heap en sommant toutes les infos en lien avec un <code>jvm_memory_type</code> = <code>heap</code> </p> </li> <li> <p>Une pour la partie non_heap en filtrant uniquement sur le <code>jvm_memory_pool_name</code> = <code>Metaspace</code> du fait qu'il repr\u00e9sente d\u00e9j\u00e0 la somme des m\u00e9moires non_heap </p> </li> <li> <p>Le fait de pouvoir ajouter de multiples queries sur un m\u00eame graphe permet d'afficher des donn\u00e9es avec des modes de calcul diff\u00e9rents.</p> </li> </ul>"},{"location":"dashboard-metrics/#monitoring-du-cpu","title":"Monitoring du CPU","text":"<p>On va aussi afficher la consommation CPU de notre application lumbercamp.</p> <p>Pour cela, on va utiliser la m\u00e9trique <code>jvm_cpu_time_seconds_total</code>.</p>"},{"location":"dashboard-metrics/#les-metriques-de-type-total","title":"Les m\u00e9triques de type <code>total</code>","text":"<p>Petit probl\u00e8me ici, la valeur correspond \u00e0 la somme des temps CPU utilis\u00e9s par l'ensemble des threads de notre application depuis le d\u00e9marrage.</p> <p>\ud83d\udedf <code>PromQL Rate</code> \u00e0 la rescousse</p> <p>On aimerait avoir la consommation par minute. Pour cela, il existe des fonctions avec PromQL notamment rate qui permet de calculer la d\u00e9riv\u00e9e d'une s\u00e9rie temporelle.</p> <p>Cette fonction travaille avec un range-vector. Le range-vector est un vecteur de valeurs sur une p\u00e9riode donn\u00e9e. Ainsi, pour calculer la d\u00e9riv\u00e9e d'une s\u00e9rie temporelle, il faut sp\u00e9cifier une p\u00e9riode.</p> Pourquoi rate et pas delta ou increase ? <ul> <li>La fonction rate est plus adapt\u00e9e pour les s\u00e9ries temporelles car elle prend en compte les variations de la s\u00e9rie dans le temps.Elle calcule la d\u00e9riv\u00e9e aux bornes du range indiqu\u00e9.</li> <li>La fonction delta ne fait que calculer la diff\u00e9rence entre deux valeurs, sans tenir compte du temps \u00e9coul\u00e9 entre elles. De plus elle ne prends pas en compte un reset de la s\u00e9rie (par exemple si l'application red\u00e9marre, la valeur de la m\u00e9trique est remise \u00e0 z\u00e9ro).</li> <li>La fonction increase est utilis\u00e9e pour calculer l'augmentation totale d'une s\u00e9rie temporelle sur une p\u00e9riode donn\u00e9e. Elle ne calcule pas la d\u00e9riv\u00e9e, mais plut\u00f4t la somme des augmentations sur cette p\u00e9riode.</li> </ul> <p>On utilisera les ranges [1m] [5m] [15m] qui vont calculer un rate par seconde en se basant sur l'ensemble des donn\u00e9es des X derni\u00e8res minutes pour chaque point de donn\u00e9es. On reproduit ainsi l'affichage du <code>top</code> unix.</p> Astuce <p>Vous pouvez facilement dupliquer une Query pour ne changer que l'intervalle souhait\u00e9</p> <p>Success</p> <p>L'objectif est d'obtenir le graphe suivant avec 3 courbes pour les rates [1m], [5m] et [15m]</p> <p></p> Spoiler la solution est l\u00e0 <p>Il faut faire 3 Query en changeant l'interval</p> <p></p>"},{"location":"dashboard-metrics/#filtrage-par-service","title":"Filtrage par service","text":"<p>Comme on l'a fait pour le dashboard Postgres, il serait pratique de pouvoir dynamiquement filtrer les informations affich\u00e9es par les widgets.</p> <p>Pour ce dashboard, on va donc ajouter une variable permettant de changer le nom du service pour lequel on souhaite avoir les m\u00e9triques.</p> <p>Objectifs:</p> <ul> <li>Cr\u00e9er une variable <code>prom_service_name</code> bas\u00e9e sur la DataSource <code>prometheus</code> permettant de r\u00e9cup\u00e9rer les services monitor\u00e9s par Prometheus</li> <li>Modifier les 2 widgets pour qu'il prenne en compte cette nouvelle variable dans leurs Query et dans leur titre</li> </ul> <p>Success</p> <p></p> Spoiler la solution est l\u00e0 <ul> <li>La configuration de la variable</li> </ul> <p></p> <ul> <li>Un exemple de Query modifi\u00e9e </li> </ul> <p>Ok c'est pas mal mais allons plus loin :</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Dashboard Advanced \u27a1\ufe0f</p>"},{"location":"dashboard-metrics/advanced/","title":"Un dashboard un peu plus avanc\u00e9","text":""},{"location":"dashboard-metrics/advanced/#configuration-du-dashboard","title":"Configuration du dashboard","text":"<p>Param\u00e8tres g\u00e9n\u00e9raux du dashboard</p> <p>On peut param\u00e9trer des informations sur le dashboard (Lecture seule, tags, description ...)</p> <p>On peut aussi changer les fr\u00e9quences de rafra\u00eechissement du dashboard, voire masquer la possibilit\u00e9 de changer la plage de temps consult\u00e9e.</p>"},{"location":"dashboard-metrics/advanced/#tooltip","title":"Tooltip","text":"<p>On aimerait voir s'il y a une corr\u00e9lation entre la consommation CPU et la m\u00e9moire. Pour le moment, lors du survol d'un point du graph des CPU, on voit seulement les valeurs du TOP et pas de la m\u00e9moire. </p> <p>L'id\u00e9e est de pouvoir facilement faire des corr\u00e9lations entre les widgets en configurant le Dashboard.</p> <p>Success</p> <p>Quand on survole un widget, on a l'information qui s'affiche \u00e9galement sur les autres widgets </p> Spoiler la solution est l\u00e0 <p>Dans <code>Settings &gt; General &gt; Panel options</code>, activez l'option `Shared Tooltip``</p> <p></p> <p>Ici par exemple, on remarque que lorsque la m\u00e9moire baisse, le CPU augmente (avec un l\u00e9ger temps de retard d\u00fb \u00e0 notre rate glissant). C'est l'effet du Garbage collector Java qui vient nettoyer la Heap \u00e0 intervalle r\u00e9gulier.</p>"},{"location":"dashboard-metrics/advanced/#annotations","title":"Annotations","text":"<p>Ici, on peut configurer des alertes qui seront mat\u00e9rialis\u00e9es directement sur les graphs sous forme d'annotation. Il est possible de configrer des regles pour afficher automtiquement une annotation sur un graph.</p>"},{"location":"dashboard-metrics/advanced/#variables","title":"Variables","text":"<p>D\u00e9j\u00e0 vu dans les 2 pr\u00e9c\u00e9dents labs.</p>"},{"location":"dashboard-metrics/advanced/#versions","title":"Versions","text":"<p>Grafana stocke les diff\u00e9rentes versions des dashboards en base de donn\u00e9es. Il est possible de restaurer les versions pr\u00e9c\u00e9dentes et d'auditer les modifications.</p>"},{"location":"dashboard-metrics/advanced/#links","title":"Links","text":"<p>Permet d'ajouter des liens utiles dans le Dashboard, soit vers un site externe soit vers un autre Dashboard.</p> <p>On peut par exemple configurer le lien pour inclure le time range en cours du Dashboard pour l'appliquer automatiquement l'autre de l'affichage de l'autre Dashboard.</p> <p>Essayons de lier nos 2 Dashboard.</p> <ul> <li>Ajouter un Tag <code>devoxx</code> via le menu <code>Settings &gt; General</code>, cela permettra de filtrer uniquement ces Dashboards. Pratique quand on a plein de Dashboard dans un Grafana.</li> <li>Ajouter un Link au Dashboard de monitoring vers le Dashboard de suivi des stocks (en filtrant uniquement les Dashboard ayant le Tag <code>devoxx</code></li> <li>Ajouter un Link vers un lien externe, par exemple vers ce super lab <code>https://grafana.grunty.uk</code></li> </ul> <p>Success</p> <p></p>"},{"location":"dashboard-metrics/advanced/#permissions","title":"Permissions","text":"<p>Rien de bien fou, mais \u00e0 noter que l'on peut g\u00e9rer les permissions assez finement sur chaque dashboard en plus de celles au niveau de l'organisation.</p>"},{"location":"dashboard-metrics/advanced/#json-modele","title":"JSON Mod\u00e8le","text":"<p>Les Dashboards sont d\u00e9crits en JSON et il est possible de r\u00e9aliser les exports et imports. Il existe d'ailleurs un marketplace de dashboards pour Grafana.</p>"},{"location":"dashboard-metrics/advanced/#gestion-des-rows","title":"Gestion des Rows","text":"<p>Pour le moment, un seul service est affich\u00e9. Ce n'est pas tr\u00e8s pratique.</p> <p>Revenez sur le dashboard. On va rajouter un \u00e9l\u00e9ment de pr\u00e9sentation sur notre dashboard : une Row.</p> <p>Cet \u00e9l\u00e9ment de pr\u00e9sentation permet de dupliquer dynamiquement ef facilement les diff\u00e9rentes visualisations en fonction des valeurs qui sont choisies dans les variables.</p> <p>Tout d'abord modifier la variable <code>prom_service_name</code> et activer les options <code>Multi-value</code>et <code>Include All option</code>:</p> <p></p> <p>Ensuite, il faut:</p> <ul> <li>Ajouter une Row</li> <li>Modifier les param\u00e8tres pour que<ul> <li>le nom soit dynamique en fonction de la variable</li> <li>la ligne soit dupliqu\u00e9e pour chaque valeur de variables choisies</li> </ul> </li> </ul> <p>Success</p> <p></p> Spoiler la solution est l\u00e0 <p></p> <p>\ud83d\udeeb Prochaine \u00e9tape : Partager \u27a1\ufe0f</p>"},{"location":"dashboard-metrics/app_stats/","title":"On va quand m\u00eame pas tout faire tout seul ?","text":""},{"location":"dashboard-metrics/app_stats/#la-communaute","title":"La communaut\u00e9","text":"<p>Grafana met \u00e0 disposition des utilisateurs le site Grafana Dashboards qui regroupe des dashboards partag\u00e9s par la communaut\u00e9. Il est possible de les importer directement dans Grafana.</p> <p></p> <p>Il est possible de faire l'import soit directement au format JSON, soit en indiquant l'ID du dashboard qui est affich\u00e9 sur le site de Grafana.</p>"},{"location":"dashboard-metrics/app_stats/#les-imports-json","title":"Les imports JSON","text":"<p>Pour exporter un de vos dashboards, il suffit de cliquer sur le bouton <code>Export as JSON</code> dans le menu <code>Export</code> du dashboard. </p> <p>Le bouton <code>Export the dashboard to use in another instance</code> permet de cr\u00e9er une zone input qui, lors de l'import du dashboard, va permettre de choisir les sources de donn\u00e9es \u00e0 utiliser pour le dashboard.</p> <p>Cela permet de ne pas hardcoder les noms des datasources dans le JSON du dashboard mais de tout de m\u00eame sp\u00e9cifier le type de datasource \u00e0 utiliser.</p> <p></p> <p>Ici, lors de l'import, un formulaire est pr\u00e9sent\u00e9 pour choisir une datasource de type <code>Prometheus</code>.</p>"},{"location":"dashboard-metrics/app_stats/#importez-les-dashboards-suivants","title":"Importez les dashboards suivants","text":"<p>On vous a pr\u00e9par\u00e9 quelques dashboards exemples :</p> DashBoardMonitoring.json <pre><code>    {\n        \"__inputs\": [\n          {\n            \"name\": \"DS_PROMETHEUS\",\n            \"label\": \"prometheus\",\n            \"description\": \"\",\n            \"type\": \"datasource\",\n            \"pluginId\": \"prometheus\",\n            \"pluginName\": \"Prometheus\"\n          }\n        ],\n        \"__elements\": {},\n        \"__requires\": [\n          {\n            \"type\": \"grafana\",\n            \"id\": \"grafana\",\n            \"name\": \"Grafana\",\n            \"version\": \"11.6.0\"\n          },\n          {\n            \"type\": \"datasource\",\n            \"id\": \"prometheus\",\n            \"name\": \"Prometheus\",\n            \"version\": \"1.0.0\"\n          },\n          {\n            \"type\": \"panel\",\n            \"id\": \"timeseries\",\n            \"name\": \"Time series\",\n            \"version\": \"\"\n          }\n        ],\n        \"annotations\": {\n          \"list\": [\n            {\n              \"builtIn\": 1,\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"enable\": true,\n              \"hide\": true,\n              \"iconColor\": \"rgba(0, 211, 255, 1)\",\n              \"name\": \"Annotations &amp; Alerts\",\n              \"target\": {\n                \"limit\": 100,\n                \"matchAny\": false,\n                \"tags\": [],\n                \"type\": \"dashboard\"\n              },\n              \"type\": \"dashboard\"\n            }\n          ]\n        },\n        \"editable\": true,\n        \"fiscalYearStartMonth\": 0,\n        \"graphTooltip\": 0,\n        \"id\": null,\n        \"links\": [],\n        \"panels\": [\n          {\n            \"collapsed\": false,\n            \"gridPos\": {\n              \"h\": 1,\n              \"w\": 24,\n              \"x\": 0,\n              \"y\": 0\n            },\n            \"id\": 4,\n            \"panels\": [],\n            \"title\": \"Row title\",\n            \"type\": \"row\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 0,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"auto\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\"\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"decbytes\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 8,\n              \"w\": 10,\n              \"x\": 0,\n              \"y\": 1\n            },\n            \"id\": 1,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [\n                  \"min\",\n                  \"max\"\n                ],\n                \"displayMode\": \"table\",\n                \"placement\": \"right\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"hideZeros\": false,\n                \"mode\": \"single\",\n                \"sort\": \"none\"\n              }\n            },\n            \"pluginVersion\": \"11.6.0\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"builder\",\n                \"exemplar\": false,\n                \"expr\": \"jvm_memory_used_bytes{service_name=\\\"lumbercamp\\\", jvm_memory_pool_name=\\\"Metaspace\\\"}\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"{{jvm_memory_type}}\",\n                \"range\": true,\n                \"refId\": \"A\",\n                \"useBackend\": false\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"builder\",\n                \"exemplar\": false,\n                \"expr\": \"sum(jvm_memory_used_bytes{service_name=\\\"lumbercamp\\\", jvm_memory_type=\\\"heap\\\"})\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"hide\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"heap\",\n                \"range\": true,\n                \"refId\": \"C\",\n                \"useBackend\": false\n              }\n            ],\n            \"title\": \"Memory Usage Lumbercamp\",\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 0,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"auto\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\"\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"s\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 8,\n              \"w\": 14,\n              \"x\": 10,\n              \"y\": 1\n            },\n            \"id\": 3,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [\n                  \"min\",\n                  \"max\"\n                ],\n                \"displayMode\": \"table\",\n                \"placement\": \"right\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"hideZeros\": false,\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"pluginVersion\": \"11.6.0\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"code\",\n                \"exemplar\": false,\n                \"expr\": \"rate(jvm_cpu_time_seconds_total{service_name=\\\"lumbercamp\\\"}[1m])\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"CPU top 1m\",\n                \"range\": true,\n                \"refId\": \"A\",\n                \"useBackend\": false\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"code\",\n                \"exemplar\": false,\n                \"expr\": \"rate(jvm_cpu_time_seconds_total{service_name=\\\"lumbercamp\\\"}[5m])\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"hide\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"CPU top 5m\",\n                \"range\": true,\n                \"refId\": \"B\",\n                \"useBackend\": false\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"code\",\n                \"exemplar\": false,\n                \"expr\": \"rate(jvm_cpu_time_seconds_total{service_name=\\\"lumbercamp\\\"}[15m])\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"hide\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"CPU top 5m\",\n                \"range\": true,\n                \"refId\": \"C\",\n                \"useBackend\": false\n              }\n            ],\n            \"title\": \"CPU Usage Lumbercamp\",\n            \"type\": \"timeseries\"\n          },\n          {\n            \"collapsed\": false,\n            \"gridPos\": {\n              \"h\": 1,\n              \"w\": 24,\n              \"x\": 0,\n              \"y\": 9\n            },\n            \"id\": 2,\n            \"panels\": [],\n            \"repeat\": \"service_name\",\n            \"title\": \"${service_name}\",\n            \"type\": \"row\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 0,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"auto\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\"\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"decbytes\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 8,\n              \"w\": 10,\n              \"x\": 0,\n              \"y\": 10\n            },\n            \"id\": 7,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [\n                  \"min\",\n                  \"max\"\n                ],\n                \"displayMode\": \"table\",\n                \"placement\": \"right\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"hideZeros\": false,\n                \"mode\": \"single\",\n                \"sort\": \"none\"\n              }\n            },\n            \"pluginVersion\": \"11.6.0\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"builder\",\n                \"exemplar\": false,\n                \"expr\": \"jvm_memory_used_bytes{service_name=\\\"$service_name\\\", jvm_memory_pool_name=\\\"Metaspace\\\"}\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"{{jvm_memory_type}}\",\n                \"range\": true,\n                \"refId\": \"A\",\n                \"useBackend\": false\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"builder\",\n                \"exemplar\": false,\n                \"expr\": \"sum(jvm_memory_used_bytes{service_name=\\\"$service_name\\\", jvm_memory_type=\\\"heap\\\"})\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"hide\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"heap\",\n                \"range\": true,\n                \"refId\": \"C\",\n                \"useBackend\": false\n              }\n            ],\n            \"title\": \"Memory Usage ${service_name}\",\n            \"type\": \"timeseries\"\n          },\n          {\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"fieldConfig\": {\n              \"defaults\": {\n                \"color\": {\n                  \"mode\": \"palette-classic\"\n                },\n                \"custom\": {\n                  \"axisBorderShow\": false,\n                  \"axisCenteredZero\": false,\n                  \"axisColorMode\": \"text\",\n                  \"axisLabel\": \"\",\n                  \"axisPlacement\": \"auto\",\n                  \"barAlignment\": 0,\n                  \"barWidthFactor\": 0.6,\n                  \"drawStyle\": \"line\",\n                  \"fillOpacity\": 0,\n                  \"gradientMode\": \"none\",\n                  \"hideFrom\": {\n                    \"legend\": false,\n                    \"tooltip\": false,\n                    \"viz\": false\n                  },\n                  \"insertNulls\": false,\n                  \"lineInterpolation\": \"linear\",\n                  \"lineWidth\": 1,\n                  \"pointSize\": 5,\n                  \"scaleDistribution\": {\n                    \"type\": \"linear\"\n                  },\n                  \"showPoints\": \"auto\",\n                  \"spanNulls\": false,\n                  \"stacking\": {\n                    \"group\": \"A\",\n                    \"mode\": \"none\"\n                  },\n                  \"thresholdsStyle\": {\n                    \"mode\": \"off\"\n                  }\n                },\n                \"mappings\": [],\n                \"thresholds\": {\n                  \"mode\": \"absolute\",\n                  \"steps\": [\n                    {\n                      \"color\": \"green\"\n                    },\n                    {\n                      \"color\": \"red\",\n                      \"value\": 80\n                    }\n                  ]\n                },\n                \"unit\": \"s\"\n              },\n              \"overrides\": []\n            },\n            \"gridPos\": {\n              \"h\": 8,\n              \"w\": 14,\n              \"x\": 10,\n              \"y\": 10\n            },\n            \"id\": 6,\n            \"options\": {\n              \"legend\": {\n                \"calcs\": [\n                  \"min\",\n                  \"max\"\n                ],\n                \"displayMode\": \"table\",\n                \"placement\": \"right\",\n                \"showLegend\": true\n              },\n              \"tooltip\": {\n                \"hideZeros\": false,\n                \"mode\": \"multi\",\n                \"sort\": \"none\"\n              }\n            },\n            \"pluginVersion\": \"11.6.0\",\n            \"targets\": [\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"code\",\n                \"exemplar\": false,\n                \"expr\": \"rate(jvm_cpu_time_seconds_total{service_name=\\\"${service_name}\\\"}[1m])\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"CPU top 1m\",\n                \"range\": true,\n                \"refId\": \"A\",\n                \"useBackend\": false\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"code\",\n                \"exemplar\": false,\n                \"expr\": \"rate(jvm_cpu_time_seconds_total{service_name=\\\"${service_name}\\\"}[5m])\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"hide\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"CPU top 5m\",\n                \"range\": true,\n                \"refId\": \"B\",\n                \"useBackend\": false\n              },\n              {\n                \"datasource\": {\n                  \"type\": \"prometheus\",\n                  \"uid\": \"${DS_PROMETHEUS}\"\n                },\n                \"disableTextWrap\": false,\n                \"editorMode\": \"code\",\n                \"exemplar\": false,\n                \"expr\": \"rate(jvm_cpu_time_seconds_total{service_name=\\\"${service_name}\\\"}[15m])\",\n                \"format\": \"time_series\",\n                \"fullMetaSearch\": false,\n                \"hide\": false,\n                \"includeNullMetadata\": true,\n                \"instant\": false,\n                \"interval\": \"\",\n                \"legendFormat\": \"CPU top 5m\",\n                \"range\": true,\n                \"refId\": \"C\",\n                \"useBackend\": false\n              }\n            ],\n            \"title\": \"CPU Usage ${service_name}\",\n            \"type\": \"timeseries\"\n          }\n        ],\n        \"schemaVersion\": 41,\n        \"tags\": [],\n        \"templating\": {\n          \"list\": [\n            {\n              \"current\": {},\n              \"definition\": \"label_values(jvm_cpu_count,service_name)\",\n              \"includeAll\": false,\n              \"label\": \"Service\",\n              \"multi\": true,\n              \"name\": \"service_name\",\n              \"options\": [],\n              \"query\": {\n                \"qryType\": 1,\n                \"query\": \"label_values(jvm_cpu_count,service_name)\",\n                \"refId\": \"PrometheusVariableQueryEditor-VariableQuery\"\n              },\n              \"refresh\": 1,\n              \"regex\": \"\",\n              \"type\": \"query\"\n            }\n          ]\n        },\n        \"time\": {\n          \"from\": \"now-6h\",\n          \"to\": \"now\"\n        },\n        \"timepicker\": {},\n        \"timezone\": \"browser\",\n        \"title\": \"Dashboard de monitoring\",\n        \"uid\": \"aeanhk9oqs7skxsc\",\n        \"version\": 1,\n        \"weekStart\": \"\"\n      }\n</code></pre> Perf DB.json <pre><code>    {\n      \"__inputs\": [\n        {\n          \"name\": \"DS_PROMETHEUS\",\n          \"label\": \"prometheus\",\n          \"description\": \"\",\n          \"type\": \"datasource\",\n          \"pluginId\": \"prometheus\",\n          \"pluginName\": \"Prometheus\"\n        }\n      ],\n      \"__elements\": {},\n      \"__requires\": [\n        {\n          \"type\": \"panel\",\n          \"id\": \"bargauge\",\n          \"name\": \"Bar gauge\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"grafana\",\n          \"id\": \"grafana\",\n          \"name\": \"Grafana\",\n          \"version\": \"11.6.0\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"piechart\",\n          \"name\": \"Pie chart\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"datasource\",\n          \"id\": \"prometheus\",\n          \"name\": \"Prometheus\",\n          \"version\": \"1.0.0\"\n        }\n      ],\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations &amp; Alerts\",\n            \"target\": {\n              \"limit\": 100,\n              \"matchAny\": false,\n              \"tags\": [],\n              \"type\": \"dashboard\"\n            },\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Observe Spring Boot application with three pillars of observability: Traces (Tempo), Metrics (Prometheus), Logs (Loki) on Grafana through OpenTelemetry and OpenMetrics.\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": null,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                }\n              },\n              \"mappings\": [],\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 9,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 16,\n          \"options\": {\n            \"displayLabels\": [\n              \"percent\"\n            ],\n            \"legend\": {\n              \"displayMode\": \"list\",\n              \"placement\": \"right\",\n              \"showLegend\": false,\n              \"values\": []\n            },\n            \"pieType\": \"pie\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"tooltip\": {\n              \"hideZeros\": false,\n              \"mode\": \"single\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": false,\n              \"expr\": \"sum by(service_name, db_sql_table ) (traces_span_metrics_duration_milliseconds_sum{service_name=\\\"$app_name\\\", db_sql_table=~\\\"$db_sql_table\\\"})\",\n              \"instant\": false,\n              \"interval\": \"\",\n              \"legendFormat\": \"{{db_sql_table}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Count\",\n          \"type\": \"piechart\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"reqps\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 15,\n            \"x\": 9,\n            \"y\": 0\n          },\n          \"id\": 12,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum by(service_name, db_sql_table) (traces_span_metrics_duration_milliseconds_sum{service_name=\\\"$app_name\\\", db_sql_table=~\\\"$db_sql_table\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{db_sql_table}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Request Per Sec\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"ms\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 9\n          },\n          \"id\": 6,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum by(db_sql_table)(traces_span_metrics_duration_milliseconds_sum{service_name=\\\"$app_name\\\", db_sql_table=~\\\"$db_sql_table\\\"}) / \\r\\nsum by(db_sql_table)(traces_span_metrics_duration_milliseconds_count{service_name=\\\"$app_name\\\", db_sql_table=~\\\"$db_sql_table\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{ span_kind}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Average Duration\",\n          \"type\": \"bargauge\"\n        }\n      ],\n      \"refresh\": \"\",\n      \"schemaVersion\": 41,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(traces_span_metrics_duration_milliseconds_sum{db_sql_table!=\\\"\\\"},service_name)\",\n            \"includeAll\": false,\n            \"label\": \"Application Name\",\n            \"name\": \"app_name\",\n            \"options\": [],\n            \"query\": {\n              \"qryType\": 1,\n              \"query\": \"label_values(traces_span_metrics_duration_milliseconds_sum{db_sql_table!=\\\"\\\"},service_name)\",\n              \"refId\": \"PrometheusVariableQueryEditor-VariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          },\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(traces_span_metrics_duration_milliseconds_sum{service_name=\\\"$app_name\\\", db_sql_table!=\\\"\\\"},db_sql_table)\",\n            \"includeAll\": true,\n            \"label\": \"Table\",\n            \"multi\": true,\n            \"name\": \"db_sql_table\",\n            \"options\": [],\n            \"query\": {\n              \"qryType\": 1,\n              \"query\": \"label_values(traces_span_metrics_duration_milliseconds_sum{service_name=\\\"$app_name\\\", db_sql_table!=\\\"\\\"},db_sql_table)\",\n              \"refId\": \"PrometheusVariableQueryEditor-VariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-30m\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {},\n      \"timezone\": \"\",\n      \"title\": \"Perf DB\",\n      \"uid\": \"dLsDQIUnzbazzazeAAazeaa\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n</code></pre> Perf Code.json <pre><code>    {\n      \"__inputs\": [\n        {\n          \"name\": \"DS_PROMETHEUS\",\n          \"label\": \"prometheus\",\n          \"description\": \"\",\n          \"type\": \"datasource\",\n          \"pluginId\": \"prometheus\",\n          \"pluginName\": \"Prometheus\"\n        }\n      ],\n      \"__elements\": {},\n      \"__requires\": [\n        {\n          \"type\": \"panel\",\n          \"id\": \"bargauge\",\n          \"name\": \"Bar gauge\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"grafana\",\n          \"id\": \"grafana\",\n          \"name\": \"Grafana\",\n          \"version\": \"11.6.0\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"piechart\",\n          \"name\": \"Pie chart\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"datasource\",\n          \"id\": \"prometheus\",\n          \"name\": \"Prometheus\",\n          \"version\": \"1.0.0\"\n        }\n      ],\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations &amp; Alerts\",\n            \"target\": {\n              \"limit\": 100,\n              \"matchAny\": false,\n              \"tags\": [],\n              \"type\": \"dashboard\"\n            },\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Observe Spring Boot application with three pillars of observability: Traces (Tempo), Metrics (Prometheus), Logs (Loki) on Grafana through OpenTelemetry and OpenMetrics.\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": null,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                }\n              },\n              \"mappings\": [],\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 9,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 16,\n          \"options\": {\n            \"displayLabels\": [\n              \"percent\"\n            ],\n            \"legend\": {\n              \"displayMode\": \"list\",\n              \"placement\": \"right\",\n              \"showLegend\": false,\n              \"values\": []\n            },\n            \"pieType\": \"pie\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"tooltip\": {\n              \"hideZeros\": false,\n              \"mode\": \"single\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": false,\n              \"expr\": \"sum by (service_name, code_function) (http_client_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"$code_function\\\"})\",\n              \"instant\": false,\n              \"interval\": \"\",\n              \"legendFormat\": \"{{code_function}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Count\",\n          \"type\": \"piechart\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"reqps\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 15,\n            \"x\": 9,\n            \"y\": 0\n          },\n          \"id\": 12,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum by (service_name, http_response_status_code) (http_client_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"$code_function\\\"})\",\n              \"format\": \"time_series\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{http_response_status_code}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Request Per Sec\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"ms\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 7,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 9\n          },\n          \"id\": 6,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum by(http_response_status_code)(http_client_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"$code_function\\\"}) / \\r\\nsum by(http_response_status_code)(http_client_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"$code_function\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{ span_kind}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Average Duration\",\n          \"type\": \"bargauge\"\n        }\n      ],\n      \"refresh\": \"\",\n      \"schemaVersion\": 41,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(http_client_request_duration_seconds_count,service_name)\",\n            \"includeAll\": false,\n            \"label\": \"Application Name\",\n            \"name\": \"app_name\",\n            \"options\": [],\n            \"query\": {\n              \"qryType\": 1,\n              \"query\": \"label_values(http_client_request_duration_seconds_count,service_name)\",\n              \"refId\": \"PrometheusVariableQueryEditor-VariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          },\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(http_client_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code!=\\\"\\\"},http_response_status_code)\",\n            \"description\": \"http_response_status_code=\\\"200\\\"\",\n            \"includeAll\": true,\n            \"label\": \"Function\",\n            \"multi\": true,\n            \"name\": \"code_function\",\n            \"options\": [],\n            \"query\": {\n              \"qryType\": 1,\n              \"query\": \"label_values(http_client_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code!=\\\"\\\"},http_response_status_code)\",\n              \"refId\": \"PrometheusVariableQueryEditor-VariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-15m\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {},\n      \"timezone\": \"\",\n      \"title\": \"Perf Code\",\n      \"uid\": \"dLsDQIUnzbazzazeAAazeaaaa\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n</code></pre> Perf API.json <pre><code>    {\n      \"__inputs\": [\n        {\n          \"name\": \"DS_PROMETHEUS\",\n          \"label\": \"prometheus\",\n          \"description\": \"\",\n          \"type\": \"datasource\",\n          \"pluginId\": \"prometheus\",\n          \"pluginName\": \"Prometheus\"\n        }\n      ],\n      \"__elements\": {},\n      \"__requires\": [\n        {\n          \"type\": \"panel\",\n          \"id\": \"bargauge\",\n          \"name\": \"Bar gauge\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"grafana\",\n          \"id\": \"grafana\",\n          \"name\": \"Grafana\",\n          \"version\": \"11.6.0\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"piechart\",\n          \"name\": \"Pie chart\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"datasource\",\n          \"id\": \"prometheus\",\n          \"name\": \"Prometheus\",\n          \"version\": \"1.0.0\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"stat\",\n          \"name\": \"Stat\",\n          \"version\": \"\"\n        }\n      ],\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations &amp; Alerts\",\n            \"target\": {\n              \"limit\": 100,\n              \"matchAny\": false,\n              \"tags\": [],\n              \"type\": \"dashboard\"\n            },\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Observe Spring Boot application with three pillars of observability: Traces (Tempo), Metrics (Prometheus), Logs (Loki) on Grafana through OpenTelemetry and OpenMetrics.\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": null,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"palette-classic\"\n              },\n              \"custom\": {\n                \"hideFrom\": {\n                  \"legend\": false,\n                  \"tooltip\": false,\n                  \"viz\": false\n                }\n              },\n              \"mappings\": []\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 9,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 16,\n          \"options\": {\n            \"displayLabels\": [\n              \"percent\"\n            ],\n            \"legend\": {\n              \"displayMode\": \"list\",\n              \"placement\": \"right\",\n              \"showLegend\": true,\n              \"values\": []\n            },\n            \"pieType\": \"pie\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"tooltip\": {\n              \"hideZeros\": false,\n              \"mode\": \"single\",\n              \"sort\": \"none\"\n            }\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": false,\n              \"expr\": \"http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route=~\\\"$http_route\\\"}\",\n              \"instant\": false,\n              \"interval\": \"\",\n              \"legendFormat\": \"{{http_route}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Count\",\n          \"type\": \"piechart\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 4,\n            \"w\": 3,\n            \"x\": 9,\n            \"y\": 0\n          },\n          \"id\": 4,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route=~\\\"$http_route\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{span_kind}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Requests\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"green\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 4,\n            \"w\": 3,\n            \"x\": 12,\n            \"y\": 0\n          },\n          \"id\": 22,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"2.*\\\",http_route=~\\\"$http_route\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total OK( 2XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 1\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 4,\n            \"w\": 3,\n            \"x\": 15,\n            \"y\": 0\n          },\n          \"id\": 31,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"3.*\\\",http_route=~\\\"$http_route\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Exceptions ( 3XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 1\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 4,\n            \"w\": 3,\n            \"x\": 18,\n            \"y\": 0\n          },\n          \"id\": 34,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"4.*\\\", http_route=~\\\"$http_route\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Exceptions ( 4XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"dark-red\",\n                    \"value\": 1\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 4,\n            \"w\": 3,\n            \"x\": 21,\n            \"y\": 0\n          },\n          \"id\": 32,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(rate(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"5.*\\\",http_route=~\\\"$http_route\\\"}[1m]))\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Exceptions ( 5XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"ms\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 5,\n            \"w\": 15,\n            \"x\": 9,\n            \"y\": 4\n          },\n          \"id\": 6,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum by(http_route)(http_server_request_duration_seconds_sum{service_name=\\\"$app_name\\\", http_route=~\\\"$http_route\\\"}) / \\r\\nsum by(http_route)(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route=~\\\"$http_route\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{ span_kind}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Average Duration\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"green\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"percentage\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 5,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 9\n          },\n          \"id\": 18,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"2.*\\\",  http_route=~\\\"$http_route\\\"} \",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{http_route}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of 2xx Requests\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 5,\n            \"w\": 12,\n            \"x\": 12,\n            \"y\": 9\n          },\n          \"id\": 12,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": false,\n              \"expr\": \"http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route=~\\\"$http_route\\\"}\",\n              \"instant\": false,\n              \"interval\": \"\",\n              \"legendFormat\": \"{{http_route}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of requests\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"description\": \"\",\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"continuous-GrYlRd\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"percentage\",\n                \"steps\": [\n                  {\n                    \"color\": \"red\"\n                  },\n                  {\n                    \"color\": \"#EAB839\",\n                    \"value\": \"\"\n                  }\n                ]\n              },\n              \"unit\": \"short\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 5,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 14\n          },\n          \"id\": 33,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_response_status_code!~\\\"2.*\\\", http_route=~\\\"$http_route\\\"} \",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{ http_route }} \",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of non 2xx Requests\",\n          \"type\": \"bargauge\"\n        }\n      ],\n      \"refresh\": \"30s\",\n      \"schemaVersion\": 41,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(http_server_request_duration_seconds_count{http_route!=\\\"\\\"}, service_name)\",\n            \"includeAll\": false,\n            \"label\": \"Application Name\",\n            \"name\": \"app_name\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(http_server_request_duration_seconds_count{http_route!=\\\"\\\"}, service_name)\",\n              \"refId\": \"StandardVariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          },\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route!=\\\"\\\"}, http_route)\",\n            \"includeAll\": true,\n            \"label\": \"http_route\",\n            \"multi\": true,\n            \"name\": \"http_route\",\n            \"options\": [],\n            \"query\": {\n              \"query\": \"label_values(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route!=\\\"\\\"}, http_route)\",\n              \"refId\": \"StandardVariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-5m\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {},\n      \"timezone\": \"\",\n      \"title\": \"Perf API\",\n      \"uid\": \"bear6lw5niwhse\",\n      \"version\": 1,\n      \"weekStart\": \"\"\n    }\n</code></pre> <p>Quizz Perf API</p> <p>Sur le Dashboard Perf API :</p> <p>Pourquoi la visualisation Number of request ne donne pas le meme nombre de requetes <code>Order</code> que sa voisine ?</p> <p>Et pourquoi y a t'il 2 lignes <code>Order</code> ?</p> Inspecter les donn\u00e9es <p>Il est possible d'inspecter les donn\u00e9es envoy\u00e9es par Grafana et re\u00e7ues par la datasource en cliquant sur le bouton <code>Inspect</code> dans le menu du panel. Les exporter en CSV facilite la lecture. </p> Spoiler la solution est l\u00e0 <p>Si on regarde les labels retourn\u00e9e on \u00e0 2 s\u00e9ries diff\u00e9rentes. L'une pour avec le label <code>http_response_status_code=\"200\"</code> et l'autre avec <code>http_response_status_code=\"418\"</code>. On a donc 2 s\u00e9ries diff\u00e9rentes pour la m\u00eame requ\u00eate. </p> <p>La visualisation Number of 2xx Requests filtre pour ne prendre que les requ\u00eates avec le label <code>http_response_status_code=~\"2.*\"</code>.</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Otel (aka OpenTelemetry) \u27a1\ufe0f</p>"},{"location":"dashboard-metrics/otel/","title":"\ud83d\udd75\ufe0f Grafana et les logs / traces","text":"<p>Quand on parle de monitoring, on distingue souvent trois types de donn\u00e9es :</p> <ul> <li>Les m\u00e9triques</li> <li>Les logs</li> <li>Les traces</li> </ul> <p>Nous avons d\u00e9j\u00e0 vu comment afficher les m\u00e9triques dans Grafana en s'appuyant sur <code>Prometheus</code>, mais il est aussi possible d'afficher les logs et les traces.</p>"},{"location":"dashboard-metrics/otel/#ajout-des-ds-loki-et-tempo","title":"Ajout des DS Loki et Tempo","text":"<p>Pour cel\u00e0 on vas configurer Grafana pour qu'il puisse se connecter \u00e0 <code>Loki</code> et <code>Tempo</code>.</p> <p>Objectifs:</p> <ul> <li>Si ce n'est pas d\u00e9j\u00e0 fait la datasource pour <code>Prometheus</code> ici</li> <li>Une data source pour se connecter \u00e0 l'instance <code>Loki</code> (Le storage pour nos logs)<ul> <li>URL : http://loki:3100</li> </ul> </li> <li>Une data source pour se connecter \u00e0 l'instance <code>Tempo</code> (le storage pour les traces)<ul> <li>URL : http://tempo:3200</li> <li>Trace to metrics : \"prometheus\"</li> <li>Trace to Logs : \"loki\"</li> </ul> </li> </ul> <p>Les logs sont ici g\u00e9r\u00e9s par Grafana <code>Loki</code> et les traces par Grafana <code>Tempo</code>. Nous allons importer le dashboard suivant pour manipuler les logs et les traces.</p> Observability Sample.json <pre><code>    {\n      \"__inputs\": [\n        {\n          \"name\": \"DS_PROMETHEUS\",\n          \"label\": \"prometheus\",\n          \"description\": \"\",\n          \"type\": \"datasource\",\n          \"pluginId\": \"prometheus\",\n          \"pluginName\": \"Prometheus\"\n        },\n        {\n          \"name\": \"DS_LOKI\",\n          \"label\": \"loki\",\n          \"description\": \"\",\n          \"type\": \"datasource\",\n          \"pluginId\": \"loki\",\n          \"pluginName\": \"Loki\"\n        },\n        {\n          \"name\": \"DS_TEMPO\",\n          \"label\": \"tempo\",\n          \"description\": \"\",\n          \"type\": \"datasource\",\n          \"pluginId\": \"tempo\",\n          \"pluginName\": \"Tempo\"\n        }\n      ],\n      \"__elements\": {},\n      \"__requires\": [\n        {\n          \"type\": \"panel\",\n          \"id\": \"bargauge\",\n          \"name\": \"Bar gauge\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"grafana\",\n          \"id\": \"grafana\",\n          \"name\": \"Grafana\",\n          \"version\": \"11.6.0\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"logs\",\n          \"name\": \"Logs\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"datasource\",\n          \"id\": \"loki\",\n          \"name\": \"Loki\",\n          \"version\": \"1.0.0\"\n        },\n        {\n          \"type\": \"datasource\",\n          \"id\": \"prometheus\",\n          \"name\": \"Prometheus\",\n          \"version\": \"1.0.0\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"stat\",\n          \"name\": \"Stat\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"panel\",\n          \"id\": \"table\",\n          \"name\": \"Table\",\n          \"version\": \"\"\n        },\n        {\n          \"type\": \"datasource\",\n          \"id\": \"tempo\",\n          \"name\": \"Tempo\",\n          \"version\": \"11.6.0-pre\"\n        }\n      ],\n      \"annotations\": {\n        \"list\": [\n          {\n            \"builtIn\": 1,\n            \"datasource\": {\n              \"type\": \"datasource\",\n              \"uid\": \"grafana\"\n            },\n            \"enable\": true,\n            \"hide\": true,\n            \"iconColor\": \"rgba(0, 211, 255, 1)\",\n            \"name\": \"Annotations &amp; Alerts\",\n            \"target\": {\n              \"limit\": 100,\n              \"matchAny\": false,\n              \"tags\": [],\n              \"type\": \"dashboard\"\n            },\n            \"type\": \"dashboard\"\n          }\n        ]\n      },\n      \"description\": \"Observe Spring Boot application with three pillars of observability: Traces (Tempo), Metrics (Prometheus), Logs (Loki) on Grafana through OpenTelemetry and OpenMetrics.\",\n      \"editable\": true,\n      \"fiscalYearStartMonth\": 0,\n      \"graphTooltip\": 0,\n      \"id\": null,\n      \"links\": [],\n      \"panels\": [\n        {\n          \"collapsed\": false,\n          \"gridPos\": {\n            \"h\": 1,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 0\n          },\n          \"id\": 28,\n          \"panels\": [],\n          \"title\": \"Metrics\",\n          \"type\": \"row\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 4,\n            \"x\": 0,\n            \"y\": 1\n          },\n          \"id\": 4,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_bucket{service_name=\\\"$app_name\\\", http_status_code=~\\\".*\\\", http_route!~\\\"$url_filter_regex\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{span_kind}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Requests\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 3,\n            \"x\": 4,\n            \"y\": 1\n          },\n          \"id\": 22,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_bucket{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"2.*\\\", http_route!~\\\"$url_filter_regex\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total 2XX\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 3,\n            \"x\": 7,\n            \"y\": 1\n          },\n          \"id\": 31,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"area\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_bucket{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"3.*\\\", http_route!~\\\"$url_filter_regex\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Exceptions ( 3XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 3,\n            \"x\": 10,\n            \"y\": 1\n          },\n          \"id\": 32,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(http_server_request_duration_seconds_bucket{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"4.*\\\", http_route!~\\\"$url_filter_regex\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Exceptions ( 4XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"mappings\": [],\n              \"noValue\": \"0\",\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 3,\n            \"w\": 3,\n            \"x\": 13,\n            \"y\": 1\n          },\n          \"id\": 33,\n          \"options\": {\n            \"colorMode\": \"value\",\n            \"graphMode\": \"none\",\n            \"justifyMode\": \"auto\",\n            \"orientation\": \"auto\",\n            \"percentChangeColorMode\": \"standard\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showPercentChange\": false,\n            \"textMode\": \"auto\",\n            \"wideLayout\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum(duration_count{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"5.*\\\", http_route!~\\\"$url_filter_regex\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Total Exceptions ( 5XX )\",\n          \"type\": \"stat\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"continuous-GrYlRd\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"ms\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 4\n          },\n          \"id\": 6,\n          \"options\": {\n            \"displayMode\": \"lcd\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"sum by(http_route)(http_server_request_duration_seconds_sum{service_name=\\\"$app_name\\\", http_route!~\\\"$url_filter_regex\\\"}) / \\r\\nsum by(http_route)(http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route!~\\\"$url_filter_regex\\\"})\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{ span_kind}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Requests Average Duration\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 12,\n            \"x\": 12,\n            \"y\": 4\n          },\n          \"id\": 37,\n          \"options\": {\n            \"displayMode\": \"lcd\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"http_server_request_duration_seconds_count{service_name=\\\"$app_name\\\", http_route!~\\\"$url_filter_regex\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{ http_route }}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of requests\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"blue\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 12,\n            \"x\": 0,\n            \"y\": 13\n          },\n          \"id\": 24,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"http_server_request_duration_seconds_sum{service_name=\\\"$app_name\\\", http_response_status_code=~\\\"2.*\\\", http_route!~\\\"$url_filter_regex\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{http_route}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of 2xx Requests\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"prometheus\",\n            \"uid\": \"${DS_PROMETHEUS}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"fixedColor\": \"red\",\n                \"mode\": \"fixed\"\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              },\n              \"unit\": \"none\"\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 9,\n            \"w\": 12,\n            \"x\": 12,\n            \"y\": 13\n          },\n          \"id\": 36,\n          \"options\": {\n            \"displayMode\": \"basic\",\n            \"legend\": {\n              \"calcs\": [],\n              \"displayMode\": \"list\",\n              \"placement\": \"bottom\",\n              \"showLegend\": false\n            },\n            \"maxVizHeight\": 300,\n            \"minVizHeight\": 10,\n            \"minVizWidth\": 0,\n            \"namePlacement\": \"auto\",\n            \"orientation\": \"horizontal\",\n            \"reduceOptions\": {\n              \"calcs\": [\n                \"range\"\n              ],\n              \"fields\": \"\",\n              \"values\": false\n            },\n            \"showUnfilled\": true,\n            \"sizing\": \"auto\",\n            \"valueMode\": \"color\"\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"prometheus\",\n                \"uid\": \"${DS_PROMETHEUS}\"\n              },\n              \"editorMode\": \"code\",\n              \"exemplar\": true,\n              \"expr\": \"http_server_request_duration_seconds_sum{service_name=\\\"$app_name\\\", http_response_status_code!~\\\"2.*\\\", http_route!~\\\"$url_filter_regex\\\"}\",\n              \"interval\": \"\",\n              \"legendFormat\": \"{{http_route}}\",\n              \"range\": true,\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Number of none 2xx Requests\",\n          \"type\": \"bargauge\"\n        },\n        {\n          \"collapsed\": false,\n          \"gridPos\": {\n            \"h\": 1,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 22\n          },\n          \"id\": 30,\n          \"panels\": [],\n          \"title\": \"Logs / Traces\",\n          \"type\": \"row\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"loki\",\n            \"uid\": \"${DS_LOKI}\"\n          },\n          \"gridPos\": {\n            \"h\": 8,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 23\n          },\n          \"id\": 2,\n          \"options\": {\n            \"dedupStrategy\": \"exact\",\n            \"enableInfiniteScrolling\": false,\n            \"enableLogDetails\": true,\n            \"prettifyLogMessage\": false,\n            \"showCommonLabels\": false,\n            \"showLabels\": false,\n            \"showTime\": true,\n            \"sortOrder\": \"Descending\",\n            \"wrapLogMessage\": false\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"loki\",\n                \"uid\": \"${DS_LOKI}\"\n              },\n              \"editorMode\": \"code\",\n              \"expr\": \"{application=\\\"$app_name\\\"} | json | line_format \\\"{{.severity}}\\\\t{{.body}}\\\"\",\n              \"hide\": false,\n              \"queryType\": \"range\",\n              \"refId\": \"A\"\n            }\n          ],\n          \"title\": \"Log of All Spring Boot Apps\",\n          \"type\": \"logs\"\n        },\n        {\n          \"datasource\": {\n            \"type\": \"tempo\",\n            \"uid\": \"${DS_TEMPO}\"\n          },\n          \"fieldConfig\": {\n            \"defaults\": {\n              \"color\": {\n                \"mode\": \"thresholds\"\n              },\n              \"custom\": {\n                \"align\": \"auto\",\n                \"cellOptions\": {\n                  \"type\": \"auto\"\n                },\n                \"inspect\": false\n              },\n              \"mappings\": [],\n              \"thresholds\": {\n                \"mode\": \"absolute\",\n                \"steps\": [\n                  {\n                    \"color\": \"green\"\n                  },\n                  {\n                    \"color\": \"red\",\n                    \"value\": 80\n                  }\n                ]\n              }\n            },\n            \"overrides\": []\n          },\n          \"gridPos\": {\n            \"h\": 26,\n            \"w\": 24,\n            \"x\": 0,\n            \"y\": 31\n          },\n          \"id\": 26,\n          \"options\": {\n            \"cellHeight\": \"sm\",\n            \"footer\": {\n              \"countRows\": false,\n              \"fields\": \"\",\n              \"reducer\": [\n                \"sum\"\n              ],\n              \"show\": false\n            },\n            \"showHeader\": true\n          },\n          \"pluginVersion\": \"11.6.0\",\n          \"targets\": [\n            {\n              \"datasource\": {\n                \"type\": \"tempo\",\n                \"uid\": \"${DS_TEMPO}\"\n              },\n              \"filters\": [\n                {\n                  \"id\": \"5578df66\",\n                  \"operator\": \"=\",\n                  \"scope\": \"span\",\n                  \"value\": [],\n                  \"valueType\": \"int\"\n                },\n                {\n                  \"id\": \"span-name\",\n                  \"operator\": \"=\",\n                  \"scope\": \"span\",\n                  \"tag\": \"name\",\n                  \"value\": [],\n                  \"valueType\": \"string\"\n                },\n                {\n                  \"id\": \"service-name\",\n                  \"operator\": \"=\",\n                  \"scope\": \"resource\",\n                  \"tag\": \"service.name\",\n                  \"value\": [\n                    \"$app_name\"\n                  ],\n                  \"valueType\": \"string\"\n                }\n              ],\n              \"groupBy\": [\n                {\n                  \"id\": \"8dcc5ceb\",\n                  \"scope\": \"span\"\n                }\n              ],\n              \"hide\": false,\n              \"limit\": 20,\n              \"query\": \"$trace_id\",\n              \"queryType\": \"traceqlSearch\",\n              \"refId\": \"A\",\n              \"tableType\": \"traces\"\n            }\n          ],\n          \"title\": \"Traces\",\n          \"type\": \"table\"\n        }\n      ],\n      \"refresh\": \"\",\n      \"schemaVersion\": 41,\n      \"tags\": [],\n      \"templating\": {\n        \"list\": [\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"prometheus\",\n              \"uid\": \"${DS_PROMETHEUS}\"\n            },\n            \"definition\": \"label_values(http_server_request_duration_seconds_sum,service_name)\",\n            \"includeAll\": false,\n            \"label\": \"Application Name\",\n            \"name\": \"app_name\",\n            \"options\": [],\n            \"query\": {\n              \"qryType\": 1,\n              \"query\": \"label_values(http_server_request_duration_seconds_sum,service_name)\",\n              \"refId\": \"PrometheusVariableQueryEditor-VariableQuery\"\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          },\n          {\n            \"current\": {\n              \"text\": \"/management/health|/management/info\",\n              \"value\": \"/management/health|/management/info\"\n            },\n            \"description\": \"Regular expression for excluse URL to monitor\",\n            \"label\": \"URL Filter Regex\",\n            \"name\": \"url_filter_regex\",\n            \"options\": [\n              {\n                \"selected\": true,\n                \"text\": \"/management/health|/management/info\",\n                \"value\": \"/management/health|/management/info\"\n              }\n            ],\n            \"query\": \"/management/health|/management/info\",\n            \"type\": \"textbox\"\n          },\n          {\n            \"current\": {},\n            \"datasource\": {\n              \"type\": \"tempo\",\n              \"uid\": \"${DS_TEMPO}\"\n            },\n            \"definition\": \"\",\n            \"description\": \"\",\n            \"label\": \"Span Names\",\n            \"name\": \"trace_id\",\n            \"options\": [],\n            \"query\": {\n              \"label\": \"kind\",\n              \"refId\": \"TempoDatasourceVariableQueryEditor-VariableQuery\",\n              \"type\": 1\n            },\n            \"refresh\": 1,\n            \"regex\": \"\",\n            \"type\": \"query\"\n          }\n        ]\n      },\n      \"time\": {\n        \"from\": \"now-30m\",\n        \"to\": \"now\"\n      },\n      \"timepicker\": {},\n      \"timezone\": \"\",\n      \"title\": \"Observability Sample\",\n      \"uid\": \"aeap3x0fe720wf\",\n      \"version\": 2,\n      \"weekStart\": \"\"\n    }\n</code></pre> <p>Deux nouvelles visualisation sont disponible avec ce Dashboard.</p>"},{"location":"dashboard-metrics/otel/#logs","title":"Logs","text":"<p>La premi\u00e9re est la visualisation <code>Log</code> qui vas permettre d'afficher les r\u00e9sultats de nos requetes vers <code>Loki</code></p> <p>Utilisez la fonction Explain Query pour obtenir de l'aide sur ce que fait cette requete</p> <p></p> <p>Pour aller plus loin sur la configuration des logs c'est par ici.</p> <p>On utilise Loki comme stockage mais il est possible de faire la meme chose avec Elastic, InfluxD ou autre.</p> <p>On n'affiche pas les logs INFO</p> <p>On vas ici modifier la requete pour masquer les logs au niveau INFO</p> Spoiler la solution est l\u00e0 <p>On ajoute simplement un filtre sur le label <code>level</code> pour exclure la valeur INFO </p>"},{"location":"dashboard-metrics/otel/#traces","title":"Traces","text":"<p>Les traces permettent de visualiser un succession d'\u00e9v\u00e9nements.</p> <p>Une trace est consititu\u00e9e de N Spans qui correspondent \u00e0 une action.</p> <p>Ici nous utilisons l'agent OpenTelemetry sur les applications Java pour les outiller. C'est l'instrumentation automatique de l'agent qui d\u00e9finit les spans.</p> <p>Il est aussi possible de d\u00e9finir ces spans par d\u00e9veloppement dans l'application en utilisant la librairie OTEL. Elle est disponible dans plusieurs langage.</p> <p>Pour afficher les traces pas de visualisation sp\u00e9cifique mais un tableau est suffisant. L'id\u00e9e ici est de lister l'ensemble des traces que l'on \u00e0 collect\u00e9.</p> <p></p> <p>Il est possible de configurr la query pour ne retenir que certains traces. Le builder permet de faire facilement des filtres, sans forcement maitriser la syntaxe de <code>Tempo</code>. Plus de d\u00e9tails sur cet \u00e9cran dans la doc officiel sur traceql de grafana</p> <p></p> <p>On vas filtrer uniquement sur les traces d'erreur</p> <p>On vas dupliquer la visualization et rajouter un filtre pour n'afficher que les traces avec un status code diff\u00e9rent de 200.</p> Spoiler la solution est l\u00e0 <p> ou alors directement en traceQL : <code>{span.http.response.status_code!=200}</code></p>"},{"location":"dashboard-metrics/otel/#on-explore-les-traces","title":"On explore les traces ?","text":"<p>Pour aller plus loin avec les traces on peux, en cliquant sur le lien avec l'ID de la Trace ou de la Span acceder \u00e0 la page de d\u00e9tail de la trace.</p> <p>On retrouve ici les diff\u00e9rents spans qui compose la trace, les temps de traitement de chaque span. Assez pratique poru diagnostiquer les problemes en production :</p> <p></p> <p>\ud83d\udeeb Prochaine \u00e9tape : Plugin Infinity &amp; API \u27a1\ufe0f</p>"},{"location":"dashboard-plugin/","title":"Dashboard \"Infinity\"","text":"<p>L'\u00e9cosyst\u00e8me Grafana est riche de plugins, ... Il existe de nombreux plugins disponibles sur le site de Grafana. Certains permettent d'ajouter des visiualisations panels, d'autre des datasources  ou encore des applications Apps. Les Apps sont des plugins plus complexes qui permettent d'ajouter des fonctionnalit\u00e9s avanc\u00e9es \u00e0 Grafana.</p> <p>Tout comme pour la dashboard Grafana fournit une page web permettant de visualiser les plugins disponibles. Il est possible de filtrer par type de plugin (datasource, panel, app, ...).</p> <p>La configuration est accessible par le menu <code>Administration &gt; Plugins and data &gt; Plugins</code> dans Grafana.</p> <p>Il est possible d'installer des plugins directement depuis l'interface de Grafana ou en ligne de commande.</p> <p>Celui de Infinity est l'un des plus complets car offrant de nombreux use cases :</p> <ul> <li>Datasources : JSON API, CSV, TSV, XML, GraphQL, HTML, Google Sheets and HTTP/REST API, RSS/ATOM</li> <li>Transformations des donn\u00e9es avec UQL/GROQ</li> <li>Diverses m\u00e9thodes d'authentification :</li> <li>Basic authentication</li> <li>API key authentication</li> <li>OAuth2 client credentials / JWT authentication</li> <li>AWS/Azure/GCP authentication</li> </ul> <p>\ud83d\udcd6 <code>Man yesoreyeram-infinity-datasource</code></p> <p>La documentation est disponible sur le site de Grafana.</p>"},{"location":"dashboard-plugin/#installation","title":"Installation","text":"<p>Il faut tout d'abord installer le plugin. Pour cela, aller dans <code>Connections &gt; Add new connection</code> et rechercher <code>infinity</code></p> <p></p> <p>Puis installer le plugin. Une fois install\u00e9, vous pouvez ajouter une nouvelle DataSource:</p> <p></p> <p>Le plugin dispose de nombreuses possibilit\u00e9s de configuration.</p>"},{"location":"dashboard-plugin/#configuration-dune-api","title":"Configuration d'une API","text":"<p>Dans notre cas, on va configurer la connexion \u00e0 une API HTTP car dans la vraie vie, il est fort possible que l'on ait pas acc\u00e8s directement \u00e0 la BDD comme nous l'avons fait dans les premi\u00e8res \u00e9tapes du lab.</p> <p>On configure donc la connexion \u00e0 l'API <code>stock</code> de notre service <code>lumbercamp</code>:</p> <p></p> <p>On valide que tout est ok via le bouton <code>Save &amp; Test</code></p> <p>Success</p> <p></p> <p>Cliquez maintenant sur <code>Explore view</code> pour voir les donn\u00e9es disponibles via l'API</p> <p>On observe que l'on a bien les donn\u00e9es en temps r\u00e9el du stock:</p> <p></p>"},{"location":"dashboard-plugin/#configuration-du-dashboard","title":"Configuration du dashboard","text":"<p>Retournez dans <code>Dashboard</code> et ajoutez un nouveau intitul\u00e9 <code>API</code>.</p> <p>Ajoutez une visualisation utilisant notre nouvelle datasource <code>api-lumbercamp</code>:</p> <ul> <li>type `Pie chart``</li> <li>affichant les portions avec leur pourcentage par type de bois</li> </ul> <p>Success</p> <p></p> <p>Il serait aussi int\u00e9ressant d'avoir une visualisation montrant les stocks \"\u00e0 risque\" facilement.</p> <p>En dupliquant le widget pr\u00e9c\u00e9dent, configurez-en un nouveau n'affichant que les stocks en-dessous de 30 pi\u00e8ces disponibles.</p> <p>Success</p> <p></p> Spoiler la solution est l\u00e0 <ul> <li>Widget de type \"Bar gauge\" en affichage horizontal</li> <li>2 transformations<ul> <li>Filtrer les stocks sup\u00e9rieurs \u00e0 30</li> <li>Ordonner les donn\u00e9es en mode d\u00e9croissant</li> </ul> </li> <li>Configurer les thresholds<ul> <li><code>Base</code> en rouge</li> <li><code>30</code> en orange</li> </ul> </li> </ul>"},{"location":"dashboard-plugin/init/","title":"Les plugin Grafana","text":"<p>Ici nous allons jouer avec le plugin Infinity.</p>"},{"location":"dashboard-plugin/init/#fonctionnalites-cles","title":"\ud83c\udfaf Fonctionnalit\u00e9s Cl\u00e9s","text":"<p>La source de donn\u00e9es Infinity prend en charge les fonctionnalit\u00e9s cl\u00e9s suivantes :</p> <ul> <li>Int\u00e9grer des donn\u00e9es provenant de multiples sources dans Grafana</li> <li>Manipulation flexible des donn\u00e9es avec UQL, JSONata, GROQ</li> <li>Divers formats de donn\u00e9es tels que JSON, CSV</li> <li>Diverses m\u00e9thodes d'authentification :</li> <li>Basic authentication</li> <li>Bearer token authentication</li> <li>API key authentication</li> <li>OAuth passthrough</li> <li>OAuth2 client credentials</li> <li>OAuth2 JWT authentication</li> <li>AWS/Azure/GCP authentication</li> <li>Digest authentication</li> <li>Alertes, requ\u00eates enregistr\u00e9es, tableaux de bord partag\u00e9s, mise en cache des requ\u00eates</li> <li>Fonctions utilitaires pour les variables</li> <li>Panneau de graphe de n\u0153uds Grafana, annotations, etc.</li> </ul>"},{"location":"dashboard-plugin/init/#utilisation-avec-du-json","title":"\ud83d\ude97 Utilisation avec du JSON","text":"<p>https://github.com/grafana/grafana-infinity-datasource/discussions/34</p>"},{"location":"dashboard-plugin/init/#utilisation-avec-du-csv","title":"\ud83d\ude97 Utilisation avec du CSV","text":"<p>https://github.com/grafana/grafana-infinity-datasource/discussions/36</p>"},{"location":"intro/","title":"\ud83d\ude82 Pr\u00e9sentation de l'application","text":""},{"location":"intro/#introduction-a-grafana-et-ses-menus-principaux","title":"Introduction \u00e0 Grafana et ses menus principaux","text":"<p>Dans ce chapitre, nous allons nous familiariser avec les diff\u00e9rents menus de configuration accessibles depuis l'interface de Grafana.</p> <p>Nous n'explorerons pas en d\u00e9tail les menus d'administration par la suite, mais il est important de les conna\u00eetre.</p> <p>Voici les principaux menus que vous utiliserez dans Grafana :</p> <p>Sur le c\u00f4t\u00e9 gauche de l'application :</p> <p></p>"},{"location":"intro/#home","title":"Home","text":"<p>La page d'accueil qui vous permet d'acc\u00e9der rapidement \u00e0 vos tableaux de bord favoris et d'explorer les options de configuration g\u00e9n\u00e9rales.</p>"},{"location":"intro/#dashboards","title":"Dashboards","text":"<p>Cette section permet de g\u00e9rer vos tableaux de bord : cr\u00e9ation et liste des dashboards existants.</p> <p>Les menus Bookmarks et Starred permettent de retrouver rapidement les tableaux de bord que vous avez marqu\u00e9s comme favoris.</p>"},{"location":"intro/#explore","title":"Explore","text":"<p>Un outil interactif pour analyser rapidement vos donn\u00e9es (id\u00e9al pour le d\u00e9pannage rapide).</p> <p>Nous en parlerons plus en d\u00e9tail dans un prochain chapitre.</p>"},{"location":"intro/#alerting","title":"Alerting","text":"<p>Configurez des alertes pour surveiller vos donn\u00e9es et \u00eatre notifi\u00e9 en cas d'anomalies.</p> <p>Nous en parlerons plus en d\u00e9tail dans un prochain chapitre.</p>"},{"location":"intro/#connections","title":"Connections","text":"<p>Grafana ne fournit pas de sources de donn\u00e9es et n'est pas responsable du stockage.</p> <p>Il se connecte uniquement \u00e0 ces data sources pour afficher les donn\u00e9es. Dans notre TP, nous aurons l'occasion de jouer avec les sources de donn\u00e9es les plus courantes.</p> <p>On verra qu'il n'y a pas de langage de requ\u00eate sp\u00e9cifique \u00e0 Grafana, il utilise le langage de requ\u00eate de la source de donn\u00e9es.</p>"},{"location":"intro/#administration","title":"Administration","text":"<p>Permet de configurer les diff\u00e9rents aspects de Grafana :</p> <ul> <li>General : En plus des menus de configuration, on trouve ici la notion d'Organization. C'est le plus haut niveau de s\u00e9gr\u00e9gation de Grafana.</li> </ul> <p> Une Organization repr\u00e9sente un tenant de votre instance. Il est possible d'y affecter des utilisateurs et de leur donner des droits d'administration / \u00e9diteur / consultation.</p> <p>Toutes les ressources d'une organisation sont isol\u00e9es des autres organisations. Il n'est pas possible de partager une datasource ou un dashboard entre deux organisations. Cette s\u00e9gr\u00e9gation pr\u00e9sente quelques limitations, mais elle a le m\u00e9rite de faire partie de la version gratuite de Grafana.</p> <p>Si vous \u00eates membre de plusieurs organisations, vous pouvez changer d'organisation en cliquant sur le nom de l'organisation en haut \u00e0 gauche de l'interface.</p> <ul> <li>Plugins : Installez des plugins pour \u00e9tendre les fonctionnalit\u00e9s de Grafana (widgets, datasources, extensions).</li> <li>Users : G\u00e9rez les utilisateurs et les permissions. Il est possible de regrouper les utilisateurs en Teams pour faciliter la gestion des droits.</li> <li>Authentification : Permet de configurer les diff\u00e9rents modes d'authentification (LDAP, OAuth, etc.)</li> </ul> <p></p>"},{"location":"intro/#help","title":"Help","text":"<p>Un espace pour acc\u00e9der \u00e0 la documentation et aux ressources d'aide :</p> <ul> <li>Community Support : Rejoignez la communaut\u00e9 Grafana.</li> <li>Documentation : Lisez les guides officiels pour approfondir vos connaissances.</li> </ul>"},{"location":"intro/#acces-a-votre-profil","title":"Acc\u00e8s \u00e0 votre profil","text":"<p>Gestion de la langue, des fuseaux horaires, des mots de passe, etc.</p>"},{"location":"intro/#mais-encore","title":"Mais encore ?","text":"<p>Bon ... Et si on commen\u00e7ait notre workshop ?</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Notre Organisation \u27a1\ufe0f</p>"},{"location":"organisation/","title":"Les organisations","text":"<p>On va commencer par cr\u00e9er une nouvelle organisation et un utilisateur admin de cette organisation.</p> <p>On utilisera cet utilisateur pour faire la suite du tutoriel.</p>"},{"location":"organisation/#lorganisation","title":"L'organisation","text":"<p>Dans le menu Administration&gt;General&gt;Organizations, on peut cr\u00e9er une nouvelle organisation.</p> <p></p>"},{"location":"organisation/#creation-des-utilisateurs","title":"Cr\u00e9ation des utilisateurs","text":"<p>On va pouvoir cr\u00e9er un utilisateur pour cette organisation. </p> <p>Et lui attribuer le r\u00f4le d'administrateur de celle-ci.</p> <p></p> <p>Vous pouvez maintenant vous d\u00e9connecter et vous reconnecter avec cet utilisateur.</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Mon premier Dashboard \u27a1\ufe0f</p>"},{"location":"setup/","title":"\ud83c\udf89 Pr\u00e9paration de l'environnement \ud83d\udee0\ufe0f","text":""},{"location":"setup/#choisissez-votre-terrain-de-jeu","title":"Choisissez votre terrain de jeu","text":""},{"location":"setup/#en-local","title":"\ud83c\udfe1 En local","text":"<p>Pour d\u00e9marrer, nous allons installer Docker et lancer le stack Docker Compose pr\u00e9par\u00e9 pour ce workshop.</p>"},{"location":"setup/#1-installer-docker","title":"1. Installer Docker","text":"<p>Docker est indispensable pour ex\u00e9cuter les diff\u00e9rents services de notre workshop.</p> <p>Si vous avez d\u00e9j\u00e0 Docker (et Docker Compose) install\u00e9, vous pouvez directement vous rendre \u00e0 l'\u00e9tape Cloner le projet.</p> <p>Sinon, suivez les instructions ci-dessous en fonction de votre syst\u00e8me d'exploitation :</p>"},{"location":"setup/#windows","title":"\ud83e\ude9f Windows","text":"<p>Attention, pour un usage professionnel, une licence est requise pour Docker Desktop. Si vous n'en avez pas, utilisez WSL.</p> <ol> <li>T\u00e9l\u00e9chargez Docker Desktop pour Windows.</li> <li>Installez Docker Desktop en suivant les \u00e9tapes de l'assistant.</li> <li>Assurez-vous que Docker est en cours d'ex\u00e9cution apr\u00e8s l'installation (v\u00e9rifiez l'ic\u00f4ne Docker dans la barre des t\u00e2ches).</li> </ol>"},{"location":"setup/#windows-avec-wsl2","title":"\ud83e\ude9f\ud83d\udc27 Windows avec WSL2","text":"<ol> <li>Installez WSL2 et configurez-le comme version par d\u00e9faut si ce n'est pas encore fait. Suivez ce guide pour l'installation.</li> <li>Assurez-vous que votre distribution par d\u00e9faut utilise WSL2. <pre><code>wsl --list --verbose\n</code></pre></li> <li>Suivez les instructions pour Linux.</li> <li>Dans votre terminal WSL, testez Docker avec : <pre><code>docker --version\n</code></pre></li> </ol>"},{"location":"setup/#macos","title":"\ud83c\udf4f MacOS","text":"<ol> <li>T\u00e9l\u00e9chargez Docker Desktop pour Mac.</li> <li>Installez l'application en d\u00e9pla\u00e7ant Docker dans le dossier Applications.</li> <li>Lancez Docker Desktop et v\u00e9rifiez que Docker fonctionne (l'ic\u00f4ne Docker doit \u00eatre visible dans la barre de menus).</li> </ol>"},{"location":"setup/#linux","title":"\ud83d\udc27 Linux","text":"<p>Installez Docker via votre gestionnaire de paquets. Par exemple, sur Ubuntu.</p>"},{"location":"setup/#2-installer-docker-compose","title":"2. Installer Docker Compose","text":"<p>Docker Compose est inclus dans Docker Desktop sur Windows et macOS. Pour Linux, installez-le comme suit :</p> <pre><code>sudo apt-get install -y docker-compose-plugin\n</code></pre> <p>V\u00e9rifiez que Docker Compose est install\u00e9 :</p> <pre><code>docker compose version\n</code></pre>"},{"location":"setup/#3-cloner-le-projet","title":"3. Cloner le projet","text":"<p>R\u00e9cup\u00e9rez le repository contenant le stack Docker Compose :</p> <p><pre><code>git clone https://github.com/tomtalks/otel_iac\ncd otel_iac\n</code></pre> On est pret pour \ud83d\ude80 Lancer la stack Docker Compose</p>"},{"location":"setup/#avec-code-space","title":"\u2601\ufe0f Avec Code Space","text":"<p>Vous pouvez utiliser Code Space sur ce repository </p> <p>Docker est Docker Compose sont d\u00e9j\u00e0 install\u00e9s.</p> <p>On est pret pour \ud83d\ude80 Lancer la stack Docker Compose</p>"},{"location":"setup/#lancer-la-stack-docker-compose","title":"\ud83d\ude80 Lancer la stack Docker Compose","text":""},{"location":"setup/#1-lancer-docker-compose","title":"1. Lancer Docker Compose","text":"<p>Dans le r\u00e9pertoire clon\u00e9, lancez le stack Docker Compose :</p> <pre><code>cd docker\ndocker compose up -d\n</code></pre> <p>Cette commande va d\u00e9marrer :</p> <ul> <li>Une base de donn\u00e9es PostgreSQL \ud83d\udc18</li> <li>Un backend Java avec OpenTelemetry \u2615</li> <li>Trois applications clientes du backend \u2615</li> <li>Un conteneur Grafana</li> </ul>"},{"location":"setup/#2-verifier-que-tout-fonctionne","title":"2. V\u00e9rifier que tout fonctionne","text":"<p>Pour v\u00e9rifier que vos services sont bien lanc\u00e9s, utilisez la commande suivante :</p> <pre><code>docker compose ps\n</code></pre> <p>Vous devriez voir tous les services avec l'\u00e9tat <code>Up</code>.</p>"},{"location":"setup/#3-acceder-a-grafana","title":"3. Acc\u00e9der \u00e0 Grafana","text":"<p>Les identifiants par d\u00e9faut sont :</p> <ul> <li>Utilisateur : <code>admin</code></li> <li>Mot de passe : <code>admin</code></li> </ul> <p>\u00c0 la connexion, vous \u00eates invit\u00e9 \u00e0 changer le mot de passe de l'utilisateur</p> <p>Ne le faites pas et cliquez sur le lien Skip en bas de la page.</p>"},{"location":"setup/#en-local_1","title":"\ud83c\udfe1 En local","text":"<p>Une fois la stack lanc\u00e9e, ouvrez votre navigateur et rendez-vous \u00e0 l'adresse suivante : http://localhost:3000</p>"},{"location":"setup/#avec-code-space_1","title":"\u2601\ufe0f Avec Code space","text":"<p>Si vous utilisez un Code Space, l'url est affich\u00e9e dans l'onglet Ports. </p> <p>\ud83d\ude80 Bravo ! Vous \u00eates pr\u00eats \u00e0 explorer Grafana et \u00e0 cr\u00e9er vos premiers tableaux de bord !</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Introduction \u00e0 Grafana \u27a1\ufe0f</p>"},{"location":"vizu/1/","title":"Mon premier dashboard","text":"<p>Nous allons maintenant manipuler un dashboard pour ajouter des widgets et avoir quelques visualisations.</p> <p></p> <p>Pour le moment, nous allons commencer par un dashboard vide.</p> <p></p> <p>Via le menu Dashboard</p> <p>Il est aussi possible de passer par le menu dashboard.</p> <p>Il est alors possible de cr\u00e9er des r\u00e9pertoires pour organiser vos dashboards.</p> <p>\ud83d\udd10 Ces r\u00e9pertoires sont aussi utilis\u00e9s pour donner des droits d'acc\u00e8s \u00e0 des utilisateurs ou des \u00e9quipes.</p>"},{"location":"vizu/1/#selection-de-la-datasource-par-defaut","title":"S\u00e9lection de la datasource par d\u00e9faut","text":"<p>On peut d\u00e9marrer et choisir de cr\u00e9er une premi\u00e8re \"visualization\" en cliquant sur Add visualization.</p> <p>La premi\u00e8re \u00e9tape est de choisir une source de donn\u00e9es pour notre dashboard. \u2139\ufe0f Elle peut \u00eatre modifi\u00e9e plus tard</p> <p></p> <p>Dans un premier temps, nous allons choisir une data source particuli\u00e8re, une source de donn\u00e9es Mock int\u00e9gr\u00e9e \u00e0 Grafana :</p> <p></p> <p>C'est une source de donn\u00e9es qui g\u00e9n\u00e8re des donn\u00e9es al\u00e9atoires pour les m\u00e9triques, les logs et les traces. Cela permet de tester les fonctionnalit\u00e9s de Grafana sans avoir \u00e0 configurer une source de donn\u00e9es r\u00e9elle.</p> <p>Elle nous permettra de voir comment fonctionne Grafana et de cr\u00e9er des visualisations de base.</p>"},{"location":"vizu/1/#visualization-la-brique-de-base-du-dashboard","title":"Visualization : la brique de base du dashboard","text":"<p>On arrive directement sur la cr\u00e9ation d'un panel de visualisation. Ils sont tous pr\u00e9sent\u00e9s de la m\u00eame mani\u00e8re:</p> <p></p> <ul> <li>Au centre, la visualisation</li> <li>En bas, les configurations des donn\u00e9es</li> <li>\u00c0 droite, les options de rendu.</li> </ul> <p>\u2139\ufe0f Si vous n'avez pas de donn\u00e9es affich\u00e9es, il suffit de cliquer sur Refresh</p>"},{"location":"vizu/1/#les-differents-types-de-visualisation","title":"Les diff\u00e9rents types de visualisation","text":"<p>On peut changer les types de repr\u00e9sentation en s\u00e9lectionnant le type de visualisation dans le menu d\u00e9roulant disponible en cliquant sur Time Series en haut du bandeau de configuration des options de rendu. </p> <p>La partie Suggestion propose des visualisations en fonction des donn\u00e9es que vous avez. </p> <p>Success</p> <p>Cliquez sur plusieurs d'entre elles pour voir les modifications s'afficher en temps r\u00e9el dans la visualisation.</p>"},{"location":"vizu/1/#la-zone-de-selection-temporelle","title":"La zone de s\u00e9lection temporelle","text":"<p>Une fois son mod\u00e8le d'affichage s\u00e9lectionn\u00e9, on veut pouvoir choisir la p\u00e9riode temporelle qui nous int\u00e9resse.</p> <p>Grafana est pr\u00e9vu pour afficher des donn\u00e9es temporelles, c'est-\u00e0-dire qu'il va prendre en compte nativement la date associ\u00e9e \u00e0 chacune de vos donn\u00e9es.</p> <p>Il est alors possible de filtrer pour ne voir les donn\u00e9es que sur une p\u00e9riode donn\u00e9e.</p> <p></p> <p>Il est aussi possible de changer le range directement en s\u00e9lectionnant la p\u00e9riode souhait\u00e9e sur le graphique avec la souris.</p> <p></p> <p>Le menu de s\u00e9lection propose diff\u00e9rentes plages de temps pr\u00e9configur\u00e9es et il est aussi possible de d\u00e9finir une plage de temps personnalis\u00e9e. </p> <p>Par d\u00e9faut, le rafra\u00eechissement des donn\u00e9es est automatique, mais vous pouvez d\u00e9finir une fr\u00e9quence de rafra\u00eechissement via le menu disponible via Refresh.</p> <p>Success</p> <p>Faites le test en modifiant pour avoir un rafra\u00eechissement toutes les 5secondes et voir le graphique se mettre \u00e0 jour automatiquement.</p>"},{"location":"vizu/1/#inspection-du-widget","title":"Inspection du widget","text":"<p>Il y a un menu de configuration sur chaque widget</p> <p></p> <p>Notamment la partie Inspect qui est bien pratique :</p> <p></p> <p>Via Inspect, vous pouvez voir:</p> <ul> <li>les donn\u00e9es brutes</li> <li>la requ\u00eate effectu\u00e9e pour r\u00e9cup\u00e9rer les donn\u00e9es</li> <li>le JSON de configuration du panel de visualisation</li> </ul> <p>Ce panel d'informations est aussi accessible via le bouton Query Inspector :</p> <p></p> <p>Elle permet de voir les donn\u00e9es utilis\u00e9es pour le widget, ainsi que la requ\u00eate (variable, on y reviendra plus tard) qui a \u00e9t\u00e9 faite pour les obtenir.</p>"},{"location":"vizu/1/#queries","title":"Queries","text":"<p>En dessous de la visualisation, un onglet Queries est disponible.</p> <p>Cela permet de configurer les requ\u00eates qui seront utilis\u00e9es pour r\u00e9cup\u00e9rer les donn\u00e9es \u00e0 afficher.</p> <p>Changez la query pour avoir le param\u00e9trage suivant</p> <p></p> <p>On a alors plusieurs s\u00e9ries de donn\u00e9es qui s'affichent.</p> <p>Formulaire query</p> <p>Dans les versions r\u00e9centes de Grafana, on retrouve un mode Builder qui permet de construire la requ\u00eate \u00e0 l'aide d'un formulaire.</p> <p>On est guid\u00e9 dans la construction de la requ\u00eate. Le formulaire s'adapte \u00e0 chaque type de requ\u00eate (PromQL, SQL ...). C'est souvent pratique pour d\u00e9buter et pour d\u00e9boguer une requ\u00eate.</p> <p>Le mode Code permet de voir la requ\u00eate. C'est souvent plus rapide pour modifier une requ\u00eate.</p>"},{"location":"vizu/1/#transformations","title":"Transformations","text":"<p>A cot\u00e9 de l'onglet Queries, il y a un onglet Transformations.</p> <p>Les transformations permettent de modifier les donn\u00e9es avant de les afficher. </p> <p>Il est possible de faire des transformations sur les donn\u00e9es quelle que soit la source de donn\u00e9es.</p> <p>Info</p> <p>Ces transformations sont r\u00e9alis\u00e9es par Grafana, elles ne modifient pas les donn\u00e9es dans la source de donn\u00e9es.</p> <p>C'est particuli\u00e8rement utile pour les donn\u00e9es qui ne sont pas pr\u00e9vues pour \u00eatre facilement affich\u00e9es. On peut alors extraire certaines informations, les convertir, les filtrer, les regrouper, etc.</p> <p>Success</p> <p>Testez d'ajouter une transformation qui fait la somme de toutes les valeurs affich\u00e9es.</p>"},{"location":"vizu/1/#les-options-communes-a-tous-les-widgets","title":"Les options communes \u00e0 tous les widgets","text":""},{"location":"vizu/1/#panel-options","title":"Panel Options","text":"<ul> <li>Le titre</li> <li>La description</li> <li>Les r\u00e9p\u00e9titions (on a un chapitre d\u00e9di\u00e9 \ud83d\ude09)</li> </ul>"},{"location":"vizu/1/#tooltip","title":"Tooltip","text":"<p>Il est possible d'afficher les infos d\u00e9taill\u00e9es en passant la souris sur le graph.</p> <p>Success</p> <p>Testez les diff\u00e9rents modes pour voir la diff\u00e9rence.</p>"},{"location":"vizu/1/#legend","title":"Legend","text":"<p>Les l\u00e9gendes sont pratiques pour afficher rapidement les extr\u00eames / moyennes de vos donn\u00e9es.</p> <p>Success</p> <p>Configurer la l\u00e9gende pour obtenir le r\u00e9sultat suivant : </p>"},{"location":"vizu/1/#axis","title":"Axis","text":"<p>Permet de r\u00e9gler les axes du graphique, les unit\u00e9s, les \u00e9chelles, etc.</p> <p>Success</p> <p>Passez votre graph en mode logarithmique par exemple.</p>"},{"location":"vizu/1/#graph-style","title":"Graph Style","text":"<p>Ici, on retrouve les configurations sp\u00e9cifiques \u00e0 chaque type de visualisation.</p>"},{"location":"vizu/1/#standard-options","title":"Standard Options","text":"<p>Permettent de configurer les unit\u00e9s de grandeur.</p> <p>On peut aussi choisir les couleurs d'affichage en fonction de la valeur des donn\u00e9es (100\u00b0C en rouge par exemple et 0\u00b0C en bleu).</p>"},{"location":"vizu/1/#les-data-links","title":"Les Data Links","text":"<p>Ils permettent de faire des liens vers d'autres dashboards / visualizations / URL externes et peuvent utiliser des placeholders pour passer les valeurs courantes.</p>"},{"location":"vizu/1/#les-thresholds","title":"Les Thresholds","text":"<p>Sans trop de surprise, ils permettent de d\u00e9finir des seuils et de leur associer une couleur particuli\u00e8re. Ils peuvent \u00eatre d\u00e9finis de mani\u00e8re absolue ou relative (en %) et s'adapter aux valeurs affich\u00e9es.</p>"},{"location":"vizu/1/#advanced-fields-override","title":"(Advanced) Fields Override","text":"<p>Ils permettent de changer tout ou partie de la configuration du widget en fonction de la valeur des donn\u00e9es.</p>"},{"location":"vizu/1/#sauvegarde-du-dashboard","title":"Sauvegarde du dashboard","text":"<p>On va enfin pouvoir sauvegarder notre dashboard. </p> <p>\u00c7a y est, nous avons notre premier dashboard avec un seul widget. Nous allons maintenant pouvoir en ajouter d'autres.</p> <p>\ud83d\udeeb Prochaine \u00e9tape : Configurer une sources de donn\u00e9es SQL \u27a1\ufe0f</p>"}]}